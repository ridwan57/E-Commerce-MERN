(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(18),a=n.n(c),s=(n(101),n(16)),o=n.n(s),i=n(29),l=(n.p,n(102),n(14)),u=n(3),j=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:"Home"})})},b=n(39),d=n(23),m=n(66);n(104);m.a.initializeApp({apiKey:"AIzaSyBS7Gi4aU2rXZ2Tjy9XUYSaLgaW8HlqgnA",authDomain:"e-commerce-mern-dbf46.firebaseapp.com",projectId:"e-commerce-mern-dbf46",storageBucket:"e-commerce-mern-dbf46.appspot.com",messagingSenderId:"129077110402",appId:"1:129077110402:web:3ba530ea06be501fccf69b",measurementId:"G-R7KHNYMLJ4"});var h=m.a.auth(),p=new m.a.auth.GoogleAuthProvider,f=n(24),O=(n(51),n(135)),g=n(136),x=n(137),v=n(20),w=n(33),y=(n(110),function(e){var t=e.history,n=Object(r.useState)("ridwananik57@gmail.com"),c=Object(d.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)("123456"),j=Object(d.a)(l,2),m=j[0],y=j[1],k=Object(r.useState)(!1),N=Object(d.a)(k,2),S=N[0],E=N[1],I=Object(v.b)(),L=Object(v.c)((function(e){return Object(b.a)({},e)})).user;Object(r.useEffect)((function(){L&&L.token&&t.push("/")}),[L]);var C=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),console.log("http://localhost:3000/register/complete"),t.preventDefault(),console.table(a,m),e.prev=4,e.next=7,h.signInWithEmailAndPassword(a,m);case 7:return n=e.sent,console.log(n),e.next=11,n.user.getIdToken();case 11:e.sent,e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),E(!1),console.log("error:",e.t0),f.b.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.signInWithPopup(p).then(function(){var e=Object(i.a)(o.a.mark((function e(n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user,e.next=3,r.getIdTokenResult();case 3:c=e.sent,I({type:"LOGGED_IN_USER",payload:{email:r.email,token:c.token}}),t.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error:",e),f.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"container p-5",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-md-3",children:[S?Object(u.jsx)("h4",{className:"text-danger",children:"Loading... "}):Object(u.jsx)("h4",{children:"Login"}),Object(u.jsxs)("form",{onSubmit:C,children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"email",className:"form-control",value:a,onChange:function(e){return s(e.target.value)},placeholder:"Enter your email",autoFocus:!0})}),Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"password",className:"form-control",value:m,onChange:function(e){return y(e.target.value)},placeholder:"Enter your password",autoFocus:!0})}),Object(u.jsx)("br",{}),Object(u.jsx)(O.a,{onClick:C,type:"primary",className:"mb-3",block:!0,shape:"round",icon:Object(u.jsx)(g.a,{}),size:"large",disabled:!a||m.length<6||S,children:"Login with Email and password"}),Object(u.jsx)(O.a,{onClick:F,type:"danger",className:"mb-3",block:!0,shape:"round",icon:Object(u.jsx)(x.a,{}),size:"large",disabled:!a||m.length<6||S,children:"Login with Google"}),Object(u.jsx)(w.b,{to:"/forgot/password",className:"float-right text-danger",children:"Forgot Password"})]})]})})})}),k=function(e){var t=e.history,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1],l=Object(v.c)((function(e){return Object(b.a)({},e)})).user;Object(r.useEffect)((function(){l&&l.token&&t.push("/")}),[l]);var j=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("http://localhost:3000/register/complete"),t.preventDefault(),n={url:"http://localhost:3000/register/complete",handleCodeInApp:!0},e.next=5,h.sendSignInLinkToEmail(a,n);case 5:f.b.success("Email is sent to ".concat(a,". Click the link to complete your registration.")),window.localStorage.setItem("emailForRegistration",a),s("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"container p-5",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(u.jsx)("h4",{children:"Register"}),Object(u.jsxs)("form",{onSubmit:j,children:[Object(u.jsx)("input",{type:"email",className:"form-control",value:a,onChange:function(e){return s(e.target.value)},placeholder:"Enter your email",autoFocus:!0}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Register"})]})]})})})},N=n(133),S=n(138),E=n(139),I=n(140),L=n(141),C=N.a.SubMenu,F=N.a.Item,R=function(e){var t=e.history,n=Object(r.useState)("home"),c=Object(d.a)(n,2),a=c[0],s=c[1],o=Object(v.c)((function(e){return Object(b.a)({},e)})).user;console.log("user:",o);var i=Object(v.b)();t=Object(l.f)();return Object(u.jsxs)(N.a,{onClick:function(e){s(e.key)},selectedKeys:[a],mode:"horizontal",children:[Object(u.jsx)(F,{icon:Object(u.jsx)(S.a,{}),children:Object(u.jsx)(w.b,{to:"/",children:" Home "})},"home"),!o&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(F,{icon:Object(u.jsx)(E.a,{}),className:"float-right",children:Object(u.jsx)(w.b,{to:"/register",children:" Register "})},"register"),Object(u.jsx)(F,{icon:Object(u.jsx)(I.a,{}),className:"float-right",children:Object(u.jsx)(w.b,{to:"/login",children:" Login "})},"login")]}),o&&Object(u.jsxs)(C,{icon:Object(u.jsx)(L.a,{}),title:o.email&&o.email.split("@")[0],className:"float-right",children:[Object(u.jsx)(F,{children:"Option 1"},"setting:1"),Object(u.jsx)(F,{icon:Object(u.jsx)(I.a,{}),onClick:function(){i({type:"LOGOUT",payload:null}),t.push("/login")},children:"Logout"})]})]})},G=function(e){var t=e.history,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)(""),j=Object(d.a)(l,2),b=j[0],m=j[1];Object(r.useEffect)((function(){s(window.localStorage.getItem("emailForRegistration")),console.log(window.location.href)}),[]);var p=function(){var e=Object(i.a)(o.a.mark((function e(n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&b){e.next=3;break}return f.b.error("Email and Password is incoorect"),e.abrupt("return");case 3:if(!(b.length<6)){e.next=6;break}return f.b.error("Password mus be at least 6 characters long"),e.abrupt("return");case 6:return n.preventDefault(),e.prev=7,e.next=10,h.signInWithEmailLink(a,window.location.href);case 10:if(r=e.sent,console.log(r),!r.user.emailVerified){e.next=21;break}return window.localStorage.removeItem("emailForRegistration"),c=h.currentUser,e.next=17,c.updatePassword(b);case 17:return e.next=19,c.getIdToken();case 19:e.sent,t.push("/");case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),console.log("error:",e.t0),f.b.error(e.t0.message);case 27:case"end":return e.stop()}}),e,null,[[7,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"container p-5",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(u.jsx)("h4",{children:"Register"}),Object(u.jsxs)("form",{onSubmit:p,children:[Object(u.jsx)("input",{type:"email",className:"form-control",value:a,disabled:!0}),Object(u.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return m(e.target.value)},placeholder:"Password",autoFocus:!0}),Object(u.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Register"})]})]})})})},P=function(e){var t=e.history,n=Object(r.useState)("ridwananik57@gmail.com"),c=Object(d.a)(n,2),a=c[0],s=c[1],l=Object(v.c)((function(e){return Object(b.a)({},e)})).user;Object(r.useEffect)((function(){l&&l.token&&t.push("/")}),[l]);var j=Object(r.useState)(!1),m=Object(d.a)(j,2),p=m[0],O=m[1],g=(Object(v.b)(),function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),t.preventDefault(),n={url:"http://localhost:3000/login",handleCodeInApp:!0},e.next=5,h.sendPasswordResetEmail(a,n).then((function(){O(!1),s(""),f.b.success("Email Sent")})).catch((function(e){O(!1),console.log("error:",e),f.b.error(e.message)}));case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(u.jsx)("div",{className:"container p-5",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-md-6 offset-md-3",children:[p?Object(u.jsx)("h4",{className:"text-danger",children:"Loading... "}):Object(u.jsx)("h4",{children:"Forgot Password"}),Object(u.jsxs)("form",{onSubmit:g,children:[Object(u.jsx)("div",{className:"form-group",children:Object(u.jsx)("input",{type:"email",className:"form-control",value:a,onChange:function(e){return s(e.target.value)},placeholder:"Enter your email",autoFocus:!0})}),Object(u.jsx)("button",{disabled:!a||p,type:"submit",className:"btn btn-raised",children:"Confirm Email"})]})]})})})},T=function(){var e=Object(v.b)();return Object(r.useEffect)((function(){var t=h.onAuthStateChanged(function(){var t=Object(i.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return console.log(n),t.next=4,n.getIdTokenResult();case 4:r=t.sent,e({type:"LOGGED_IN_USER",payload:{email:n.email,token:r.token}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f.a,{}),Object(u.jsx)(R,{}),Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/register/complete",component:G}),Object(u.jsx)(l.a,{exact:!0,path:"/login",component:y}),Object(u.jsx)(l.a,{exact:!0,path:"/register",component:k}),Object(u.jsx)(l.a,{exact:!0,path:"/forgot/password",component:P}),Object(u.jsx)(l.a,{exact:!0,path:"/",component:j})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},A=(n(130),n(42)),U=n(94),_=Object(A.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":case"LOGOUT":return t.payload;default:return e}}}),z=Object(A.createStore)(_,Object(U.composeWithDevTools)());a.a.render(Object(u.jsx)(v.a,{store:z,children:Object(u.jsx)(w.a,{children:Object(u.jsx)(T,{})})}),document.getElementById("root")),D()}},[[131,1,2]]]);
//# sourceMappingURL=main.e9d33439.chunk.js.map