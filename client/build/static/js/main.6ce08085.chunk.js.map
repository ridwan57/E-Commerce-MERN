{"version":3,"sources":["firebase.js","functions/auth.js","pages/auth/Login.js","pages/auth/Register.js","components/cards/Jumbotron.js","functions/category.js","components/category/CategoryList.js","functions/product.js","functions/ratings.js","components/cards/LoadingCard.js","images/laptop.png","components/cards/ProductCard.js","components/home/BestSellers.js","components/home/NewArrivals.js","functions/sub.js","components/subs/SubList.js","pages/Home.js","components/forms/Search.js","components/nav/Header.js","pages/auth/RegisterComplete.js","pages/auth/ForgotPassword.js","components/nav/UserNav.js","pages/user/History.js","components/nav/routes/LoadingToRedirect.js","components/nav/routes/UserRoute.js","pages/user/Password.js","pages/user/Wishlist.js","components/nav/routes/AdminRoute.js","components/cards/AdminProductCard.js","components/nav/AdminNav.js","pages/admin/AdminDashboard.js","components/forms/CategoryForms.js","components/forms/LocalSearch.js","pages/admin/category/CategoryCreate.js","pages/admin/category/CategoryUpdate.js","pages/admin/sub/SubCreate.js","pages/admin/sub/SubUpdate.js","components/forms/ProductCreateForm.js","components/forms/FileUpload.js","pages/admin/product/ProductCreate.js","pages/admin/product/AllProducts.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js","components/cards/ProductListItems.js","components/modal/RatingModal.js","components/cards/SingleProduct.js","pages/Product.js","pages/category/CategoryHome.js","pages/subs/SubHome.js","pages/Shop.js","App.js","reportWebVitals.js","reducers/index.js","reducers/userReducer.js","reducers/searchReducer.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","googleAuthProvider","GoogleAuthProvider","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","Login","history","useState","email","setEmail","password","setPassword","loading","setLoading","user","useSelector","state","dispatch","useDispatch","useEffect","location","token","push","roleBasedRedirect","res","intended","from","data","role","handleSubmit","e","preventDefault","signInWithEmailAndPassword","result","getIdTokenResult","idTokenResult","then","type","payload","name","_id","catch","err","console","log","toast","error","message","googleLogin","signInWithPopup","className","onSubmit","value","onChange","target","placeholder","autoFocus","onClick","block","shape","icon","MailOutlined","size","disabled","length","GoogleOutlined","to","Register","config","url","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","Jumbotron","text","options","strings","autoStart","loop","getCategories","get","getCategory","slug","removeCategory","delete","updateCategory","category","put","createCategory","getCategorySubs","CategoryList","categories","setCategories","map","createProduct","product","getProductsByCount","count","removeProduct","getProduct","updateProduct","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","getSearchProducts","arg","showAverage","p","ratings","ratingsArray","total","r","reduce","n","starDimension","starSpacing","starRatedColor","rating","editing","LoadingCard","totalCards","i","parseInt","active","cards","Meta","Card","ProductCard","handleRemove","title","description","images","cover","alt","public_id","src","LaptopImg","style","height","objectFit","actions","EyeOutlined","ShoppingCartOutlined","substring","BestSellers","products","setProducts","setPage","productsCount","setProductsCount","loadAllProducts","current","Math","ceil","NewArrivals","getSubs","getSub","removeSub","updateSub","sub","createSub","SubList","subs","setSubs","Home","Search","search","useHistory","SearchOutlined","cursor","SubMenu","Menu","Item","Header","setCurrent","key","selectedKeys","mode","AppstoreOutlined","UserAddOutlined","UserOutlined","SettingOutlined","split","LogoutOutlined","signOut","RegisterComplete","getItem","signInWithEmailLink","href","emailVerified","removeItem","updatePassword","ForgotPassword","REACT_APP_FORGOT_PASSWORD_REDIRECT_URL","sendPasswordResetEmail","UserNav","History","LoadingToRedirect","setCount","interval","setInterval","c","clearInterval","UserRoute","children","rest","Password","Wishlist","AdminRoute","ok","setOk","AdminProductCard","EditOutlined","DeleteOutlined","AdminNav","AdminDashboard","CategoryForm","setName","required","LocalSearch","setKeyword","keyword","CategoryCreate","loadCategories","response","status","filter","toLowerCase","includes","id","answer","confirm","CategoryUpdate","params","match","SubCreate","setCategory","loadSubs","parent","SubUpdate","setParent","loadSub","s","selected","Option","Select","ProductCreateForm","props","setValues","handleChange","values","handleCategoryChange","subOptions","price","quantity","shipping","colors","brands","color","brand","b","width","defaultValue","val","resizeFile","file","Promise","resolve","Resizer","imageFileResizer","uri","FileUpload","image","filteredImages","hidden","multiple","accept","files","allUploadedFiles","initialState","ProductCreate","setSubOptions","setKey","LoadingOutlined","alert","reload","prev","AllProducts","ProductUpdateForm","arrayOfSubs","setArrayOfSubs","selectedCategory","ProductUpdate","setSelectedCategory","loadProduct","arr","ProductListItems","sold","RatingModal","onOkClick","modalVisible","setModalVisible","useParams","pathname","StarOutlined","centered","visible","onOk","onCancel","TabPane","Tabs","SingleProduct","onStarClick","showArrows","autoPlay","infiniteLoop","Laptop","defaultActiveKey","tab","HeartOutlined","color2","half","Product","setProduct","relatedProduct","setRelatedProduct","setRating","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","er","CategoryHome","JSON","stringify","SubHome","Shop","delayed","setTimeout","loadSearchProducts","clearTimeout","query","App","unsubscribe","onAuthStateChanged","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6ce08085.chunk.js","sourcesContent":["import firebase from \"firebase/app\"\r\nimport \"firebase/auth\"\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBS7Gi4aU2rXZ2Tjy9XUYSaLgaW8HlqgnA\",\r\n    authDomain: \"e-commerce-mern-dbf46.firebaseapp.com\",\r\n    projectId: \"e-commerce-mern-dbf46\",\r\n    storageBucket: \"e-commerce-mern-dbf46.appspot.com\",\r\n    messagingSenderId: \"129077110402\",\r\n    appId: \"1:129077110402:web:3ba530ea06be501fccf69b\",\r\n    measurementId: \"G-R7KHNYMLJ4\"\r\n};\r\n\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// export\r\nexport const auth = firebase.auth();\r\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();","import axios from \"axios\";\r\n\r\nexport const createOrUpdateUser = async (authtoken) => {\r\n    return await axios.post(\r\n        `${process.env.REACT_APP_API}/create-or-update-user`,\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    );\r\n};\r\n\r\nexport const currentUser = async (authtoken) => {\r\n    return await axios.post(\r\n        `${process.env.REACT_APP_API}/current-user`,\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    );\r\n};\r\n\r\nexport const currentAdmin = async (authtoken) => {\r\n    return await axios.post(\r\n        `${process.env.REACT_APP_API}/current-admin`,\r\n        {},\r\n        {\r\n            headers: {\r\n                authtoken,\r\n            },\r\n        }\r\n    );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth, googleAuthProvider } from \"../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Button } from \"antd\";\r\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createOrUpdateUser } from \"../../functions/auth\";\r\n\r\nconst Login = ({ history }) => {\r\n    const [email, setEmail] = useState(\"ridwananik57@gmail.com\");\r\n    const [password, setPassword] = useState(\"1234567\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n\r\n\r\n    let dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        let intended = history.location.state;\r\n        if (intended) {\r\n            return;\r\n        } else {\r\n            if (user && user.token) history.push(\"/\");\r\n        }\r\n    }, [user, history]);\r\n\r\n\r\n\r\n    const roleBasedRedirect = (res) => {\r\n        // check if intended\r\n        let intended = history.location.state;\r\n        if (intended) {\r\n            history.push(intended.from);\r\n        } else {\r\n            if (res.data.role === \"admin\") {\r\n                history.push(\"/admin/dashboard\");\r\n            } else {\r\n                history.push(\"/user/history\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        // console.table(email, password);\r\n        try {\r\n            const result = await auth.signInWithEmailAndPassword(email, password);\r\n            // console.log(result);\r\n            const { user } = result;\r\n            const idTokenResult = await user.getIdTokenResult();\r\n\r\n            createOrUpdateUser(idTokenResult.token)\r\n                .then((res) => {\r\n                    dispatch({\r\n                        type: \"LOGGED_IN_USER\",\r\n                        payload: {\r\n                            name: res.data.name,\r\n                            email: res.data.email,\r\n                            token: idTokenResult.token,\r\n                            role: res.data.role,\r\n                            _id: res.data._id,\r\n                        },\r\n                    });\r\n                    roleBasedRedirect(res);\r\n                })\r\n                .catch((err) => console.log(err));\r\n\r\n            // history.push(\"/\");\r\n        } catch (error) {\r\n            console.log(error);\r\n            toast.error(error.message);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const googleLogin = async () => {\r\n        auth\r\n            .signInWithPopup(googleAuthProvider)\r\n            .then(async (result) => {\r\n                const { user } = result;\r\n                const idTokenResult = await user.getIdTokenResult();\r\n                createOrUpdateUser(idTokenResult.token)\r\n                    .then((res) => {\r\n                        dispatch({\r\n                            type: \"LOGGED_IN_USER\",\r\n                            payload: {\r\n                                name: res.data.name,\r\n                                email: res.data.email,\r\n                                token: idTokenResult.token,\r\n                                role: res.data.role,\r\n                                _id: res.data._id,\r\n                            },\r\n                        });\r\n                        roleBasedRedirect(res);\r\n                    })\r\n                    .catch((err) => console.log(err));\r\n                // history.push(\"/\");\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                toast.error(err.message);\r\n            });\r\n    };\r\n\r\n    const loginForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder=\"Your email\"\r\n                    autoFocus\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <input\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    placeholder=\"Your password\"\r\n                />\r\n            </div>\r\n\r\n            <br />\r\n            <Button\r\n                onClick={handleSubmit}\r\n                type=\"primary\"\r\n                className=\"mb-3\"\r\n                block\r\n                shape=\"round\"\r\n                icon={<MailOutlined />}\r\n                size=\"large\"\r\n                disabled={!email || password.length < 6}\r\n            >\r\n                Login with Email/Password\r\n      </Button>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                        <h4>Login</h4>\r\n                    )}\r\n                    {loginForm()}\r\n\r\n                    <Button\r\n                        onClick={googleLogin}\r\n                        type=\"danger\"\r\n                        className=\"mb-3\"\r\n                        block\r\n                        shape=\"round\"\r\n                        icon={<GoogleOutlined />}\r\n                        size=\"large\"\r\n                    >\r\n                        Login with Google\r\n          </Button>\r\n\r\n                    <Link to=\"/forgot/password\" className=\"float-right text-danger\">\r\n                        Forgot Password\r\n          </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Register = ({ history }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) history.push(\"/\");\r\n    }, [user, history]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        // console.log(\"ENV --->\", process.env.REACT_APP_REGISTER_REDIRECT_URL);\r\n        const config = {\r\n            url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\r\n            handleCodeInApp: true,\r\n        };\r\n\r\n        await auth.sendSignInLinkToEmail(email, config);\r\n        toast.success(\r\n            `Email is sent to ${email}. Click the link to complete your registration.`\r\n        );\r\n        // save user email in local storage\r\n        window.localStorage.setItem(\"emailForRegistration\", email);\r\n        // clear state\r\n        setEmail(\"\");\r\n    };\r\n\r\n    const registerForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"Your email\"\r\n                autoFocus\r\n            />\r\n\r\n            <br />\r\n            <button type=\"submit\" className=\"btn btn-raised\">\r\n                Register\r\n      </button>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register</h4>\r\n                    {registerForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n","import React from 'react'\r\nimport Typewriter from 'typewriter-effect';\r\n\r\n\r\nconst Jumbotron = ({ text }) => {\r\n    return (\r\n        <Typewriter\r\n            options={{\r\n                strings: text,\r\n                autoStart: true,\r\n                loop: true,\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Jumbotron\r\n","import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n    await axios.get(\r\n        `${process.env.REACT_APP_API}/categories`);\r\n\r\n\r\nexport const getCategory = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\n\r\nexport const removeCategory = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n    await axios.put(\r\n        `${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/category/`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\n    export const getCategorySubs = async (_id) => await axios.get(\r\n        `${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n    ","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { getCategories } from '../../functions/category'\r\n\r\nconst CategoryList = () => {\r\n    const [categories, setCategories] = useState({})\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setLoading(false)\r\n        getCategories().then(res => {\r\n            console.log(res)\r\n            setCategories(res.data)\r\n            setLoading(false)\r\n        }).catch(err => {\r\n            console.log(err)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n    const listCategories = () =>\r\n        categories.map(category => (\r\n            <div className='col btn-block m-3 btn btn-outlined-primary btn-lg btn-raised'\r\n                key={category._id}>\r\n                <Link to={`/category/${category.slug}`}>{category.name}</Link>\r\n            </div>\r\n\r\n        ))\r\n\r\n\r\n    return (\r\n        <div className='container'>\r\n            <div className='row text-center'>\r\n                {loading ? <h4 className='text-danger'>Loading...</h4> : (\r\n\r\n                    categories && categories.length > 0 ? listCategories() :\r\n                        'No category'\r\n\r\n\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryList\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/product/`, product, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProduct = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\n\r\nexport const updateProduct = async (slug, product, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProducts = async (sort, order, page) => await axios.post(\r\n    `${process.env.REACT_APP_API}/products`, {\r\n    sort, order, page\r\n});\r\n\r\nexport const getProductsCount = async (sort, order, page) => await axios.get(\r\n    `${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`, {\r\n    star\r\n}, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getRelated = async (productId) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\n\r\nexport const getSearchProducts = async (arg) => await axios.post(\r\n    `${process.env.REACT_APP_API}/search/filters`, arg\r\n);","import React from \"react\";\r\nimport StarRating from \"react-star-ratings\";\r\n\r\nexport const showAverage = (p) => {\r\n    if (p && p.ratings) {\r\n        let ratingsArray = p && p.ratings;\r\n        let total = [];\r\n        let length = ratingsArray.length;\r\n        // console.log(\"length\", length);\r\n\r\n        ratingsArray.map((r) => total.push(r.star));\r\n        let totalReduced = total.reduce((p, n) => p + n, 0);\r\n        // console.log(\"totalReduced\", totalReduced);\r\n\r\n        let highest = length * 5;\r\n        // console.log(\"highest\", highest);\r\n\r\n        let result = (totalReduced * 5) / highest;\r\n        // console.log(\"result\", result);\r\n\r\n        return (\r\n            <div className=\"text-center pt-1 pb-3\">\r\n                <span>\r\n                    <StarRating\r\n                        starDimension=\"20px\"\r\n                        starSpacing=\"2px\"\r\n                        starRatedColor=\"red\"\r\n                        rating={result}\r\n                        editing={false}\r\n                    />{\" \"}\r\n          ({p.ratings.length})\r\n        </span>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n","import React from 'react'\r\nimport { Card, Skeleton } from \"antd\";\r\nconst LoadingCard = ({ count }) => {\r\n    const cards = () => {\r\n        let totalCards = []\r\n        for (let i = 0; i < parseInt(count); i++) {\r\n            totalCards.push(\r\n                <Card className='col-md-4' key={i}>\r\n                    <Skeleton active></Skeleton>\r\n                </Card>\r\n            )\r\n        }\r\n        return totalCards\r\n    }\r\n\r\n    return <div className='row pb-5'>{cards()}</div>\r\n}\r\n\r\nexport default LoadingCard\r\n\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/laptop.db0a6ff4.png\";","import React from \"react\";\r\nimport { Card } from \"antd\";\r\nimport { EyeOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LaptopImg from '../../images/laptop.png'\r\n\r\nconst { Meta } = Card;\r\n\r\nconst ProductCard = ({ product, handleRemove }) => {\r\n    // destructure\r\n    const { title, description, images, slug } = product;\r\n\r\n    return (\r\n\r\n        <Card\r\n            cover={\r\n                <img\r\n                    alt={images && images.length ? images[0].public_id : \"\"}\r\n                    src={images && images.length ? images[0].url : LaptopImg}\r\n                    style={{ height: \"150px\", objectFit: \"cover\" }}\r\n                    className=\"p-1\"\r\n                />\r\n            }\r\n            actions={[\r\n                <Link to={`/product/${slug}`}>\r\n                    <EyeOutlined className='text-warning' /><br /> View Product\r\n                </Link>\r\n                ,\r\n                <>\r\n                    <ShoppingCartOutlined className='text-danger'\r\n                        onClick={e => handleRemove(slug)} /> <br /> Add to cart\r\n                </>\r\n            ]}\r\n        >\r\n            <Meta title={title} description={`${description && description.substring(0, 20)}...`} />\r\n\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ProductCard;\r\n","import { Pagination, Skeleton } from \"antd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProducts, getProductsCount } from \"../../functions/product\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\nimport LoadingCard from \"../cards/LoadingCard\";\r\nimport ProductCard from \"../cards/ProductCard\";\r\n\r\n\r\n\r\n\r\nconst BestSellers = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1)\r\n    const [productsCount, setProductsCount] = useState(0)\r\n    const onChange = (page) => {\r\n        console.log('pagination', page)\r\n        setPage(page)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        loadAllProducts();\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        getProductsCount().then(res => setProductsCount(res.data))\r\n    }, []);\r\n\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true);\r\n        getProducts('sold', 'desc', page)\r\n            .then((res) => {\r\n                setProducts(res.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container\">\r\n\r\n                {loading ? (\r\n                    <LoadingCard count={3} />\r\n                ) :\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                            <div key={product._id} className=\"col-md-4 mb-4\">\r\n                                {product && product.ratings && product.ratings.length > 0 ? showAverage(product) : <div className='text-center pt-2 pb-3 '> No rating yet</div>}\r\n                                <ProductCard key={product._id}\r\n                                    product={product}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n\r\n                    </div>\r\n                }\r\n                <div className='row'>\r\n                    <nav className='col-md-4 offset-md-4 text-center pt-2 p-3'>\r\n                        <Pagination\r\n                            onChange={onChange}\r\n                            // onShowSizeChange={onShowSizeChange}\r\n                            current={page}\r\n                            total={Math.ceil(productsCount / 3) * 10}\r\n                        />\r\n\r\n                    </nav>\r\n\r\n\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n        </>\r\n\r\n    );\r\n};\r\n\r\nexport default BestSellers;\r\n","import { Pagination, Skeleton } from \"antd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getProducts, getProductsCount } from \"../../functions/product\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\nimport Jumbotron from \"../cards/Jumbotron\";\r\nimport LoadingCard from \"../cards/LoadingCard\";\r\nimport ProductCard from \"../cards/ProductCard\";\r\n\r\n\r\nconst NewArrivals = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1)\r\n    const [productsCount, setProductsCount] = useState(0)\r\n    const onChange = (page) => {\r\n        console.log('pagination', page)\r\n        setPage(page)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        loadAllProducts()\r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        getProductsCount().then(res => setProductsCount(res.data))\r\n    }, []);\r\n\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true);\r\n        getProducts('createdAt', 'asc', page)\r\n            .then((res) => {\r\n                setProducts(res.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n            <div className=\"container\">\r\n\r\n                {loading ? (\r\n                    <LoadingCard count={3} />\r\n                ) :\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                            <div key={product._id} className=\"col-md-4 mb-4\">\r\n                                {product && product.ratings && product.ratings.length > 0 ? showAverage(product) : <div className='text-center pt-2 pb-3 '> No rating yet</div>}\r\n                                <ProductCard \r\n                                    product={product}\r\n                                />\r\n                            </div>\r\n                        ))}\r\n\r\n                    </div>\r\n                }\r\n                <div className='row'>\r\n                    <nav className='col-md-4 offset-md-4 text-center pt-2 p-3'>\r\n                        <Pagination\r\n                            onChange={onChange}\r\n                            // onShowSizeChange={onShowSizeChange}\r\n                            current={page}\r\n                            total={Math.ceil(productsCount / 3) * 10}\r\n                        />\r\n\r\n                    </nav>\r\n\r\n\r\n\r\n                </div>\r\n\r\n\r\n            </div>\r\n\r\n\r\n        </>\r\n\r\n    );\r\n};\r\n\r\nexport default NewArrivals;\r\n","import axios from \"axios\";\r\n\r\nexport const getSubs = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/subs`);\r\n\r\nexport const getSub = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/sub/${slug}`);\r\n\r\nexport const removeSub = async (slug, authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/sub/${slug}`, {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n    });\r\n\r\nexport const updateSub = async (slug, sub, authtoken) =>\r\n    await axios.put(`${process.env.REACT_APP_API}/sub/${slug}`, sub, {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n    });\r\n\r\nexport const createSub = async (sub, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/sub`, sub, {\r\n        headers: {\r\n            authtoken,\r\n        },\r\n    });\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { getSubs } from '../../functions/sub'\r\n\r\nconst SubList = () => {\r\n  const [subs, setSubs] = useState({})\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setLoading(false)\r\n    getSubs().then(res => {\r\n      console.log(res)\r\n      setSubs(res.data)\r\n      setLoading(false)\r\n    }).catch(err => {\r\n      console.log(err)\r\n      setLoading(false)\r\n    })\r\n  }, [])\r\n  const listSubs = () =>\r\n    subs.map(sub => (\r\n      <div className='col btn-block m-3 btn btn-outlined-primary btn-lg btn-raised'\r\n        key={sub._id}>\r\n        <Link to={`/sub/${sub.slug}`}>{sub.name}</Link>\r\n      </div>\r\n\r\n    ))\r\n\r\n\r\n  return (\r\n    <div className='container'>\r\n      <div className='row text-center'>\r\n        {loading ? <h4 className='text-danger'>Loading...</h4> : (\r\n\r\n          subs && subs.length > 0 ? listSubs() :\r\n            'No Sub category'\r\n\r\n\r\n        )}\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SubList\r\n","\r\nimport React from \"react\";\r\n\r\nimport Jumbotron from \"../components/cards/Jumbotron\";\r\nimport CategoryList from \"../components/category/CategoryList\";\r\nimport BestSellers from \"../components/home/BestSellers\";\r\n\r\nimport NewArrivals from \"../components/home/NewArrivals\";\r\nimport SubList from \"../components/subs/SubList\";\r\n\r\nconst Home = () => {\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='jumbotron text-danger h1 font-weight-bold text-center'>\r\n                <Jumbotron text={[\"New Collection\", \"Latest Products\"]} />\r\n\r\n\r\n            </div>\r\n            <h5 className='text-center p-3 mt-5 mb-5 display-4 \r\n            jumbotron'> New Arrivals</h5>\r\n            <NewArrivals />\r\n            <h5 className='text-center p-3 mt-5 mb-5 display-4 \r\n            jumbotron'> Best Sellers</h5>\r\n            <BestSellers />\r\n\r\n            <h5 className='text-center p-3 mt-5 mb-5 display-4 \r\n            jumbotron'> Categories</h5>\r\n            <CategoryList />\r\n\r\n            <h5 className='text-center p-3 mt-5 mb-5 display-4 \r\n            jumbotron'> Sub Categories</h5>\r\n            <SubList />\r\n\r\n        </>\r\n\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\n\r\nconst Search = () => {\r\n    const dispatch = useDispatch();\r\n    const { search } = useSelector((state) => ({ ...state }));\r\n    const { text } = search;\r\n\r\n    const history = useHistory();\r\n\r\n    const handleChange = (e) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: e.target.value ? e.target.value : '' },\r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        history.push(`/shop?${text}`);\r\n    };\r\n\r\n    return (\r\n        <form className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit}>\r\n            <input\r\n\r\n                onChange={handleChange}\r\n                type=\"search\"\r\n                value={text}\r\n                className=\"form-control mr-sm-2\"\r\n                placeholder=\"Search\"\r\n            />\r\n            <SearchOutlined onClick={handleSubmit} style={{ cursor: \"pointer\" }} />\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState } from \"react\";\r\nimport { Menu } from \"antd\";\r\nimport {\r\n    AppstoreOutlined,\r\n    SettingOutlined,\r\n    UserOutlined,\r\n    UserAddOutlined,\r\n    LogoutOutlined,\r\n    ShoppingCartOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport firebase from \"firebase\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Search from \"../forms/Search\";\r\n\r\nconst { SubMenu, Item } = Menu;\r\n\r\nconst Header = () => {\r\n    const [current, setCurrent] = useState(\"home\");\r\n\r\n    let dispatch = useDispatch();\r\n    let { user } = useSelector((state) => ({ ...state }));\r\n\r\n    let history = useHistory();\r\n\r\n    const handleClick = (e) => {\r\n        // console.log(e.key);\r\n        setCurrent(e.key);\r\n    };\r\n\r\n    const logout = () => {\r\n        firebase.auth().signOut();\r\n        dispatch({\r\n            type: \"LOGOUT\",\r\n            payload: null,\r\n        });\r\n        history.push(\"/login\");\r\n    };\r\n\r\n    return (\r\n        <Menu onClick={handleClick} selectedKeys={[current]} mode=\"horizontal\">\r\n            <Item key=\"home\" icon={<AppstoreOutlined />}>\r\n                <Link to=\"/\">Home</Link>\r\n            </Item>\r\n\r\n            <Item key=\"shop\" icon={<ShoppingCartOutlined />}>\r\n                <Link to=\"/shop\">Shop</Link>\r\n            </Item>\r\n\r\n\r\n\r\n            {!user && (\r\n                <Item key=\"register\" icon={<UserAddOutlined />} className=\"float-right\">\r\n                    <Link to=\"/register\">Register</Link>\r\n                </Item>\r\n            )}\r\n\r\n            {!user && (\r\n                <Item key=\"login\" icon={<UserOutlined />} className=\"float-right\">\r\n                    <Link to=\"/login\">Login</Link>\r\n                </Item>\r\n            )}\r\n\r\n\r\n            {user && (\r\n                <SubMenu\r\n\r\n                    icon={<SettingOutlined />}\r\n                    title={user.email && user.email.split(\"@\")[0]}\r\n                    className=\"float-right\"\r\n                >\r\n                    {user && user.role === 'subscriber' && <Item key='user' ><Link to='/user/history'> DashBoard</Link></Item>}\r\n                    {user && user.role === 'admin' && <Item key='admin'><Link to='/admin/dashboard'> DashBoard</Link></Item>}\r\n\r\n\r\n                    <Item key=\"logout\" icon={<LogoutOutlined />} onClick={logout}>\r\n                        Logout\r\n                      </Item>\r\n                </SubMenu>\r\n            )\r\n            }\r\n            <div className='float-right p-1' key='search'>\r\n\r\n                <Search />\r\n            </div>\r\n        </Menu >\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createOrUpdateUser } from \"../../functions/auth\";\r\n\r\nconst RegisterComplete = ({ history }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    // const { user } = useSelector((state) => ({ ...state }));\r\n    let dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        setEmail(window.localStorage.getItem(\"emailForRegistration\"));\r\n        // console.log(window.location.href);\r\n        // console.log(window.localStorage.getItem(\"emailForRegistration\"));\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        // validation\r\n        if (!email || !password) {\r\n            toast.error(\"Email and password is required\");\r\n            return;\r\n        }\r\n\r\n        if (password.length < 6) {\r\n            toast.error(\"Password must be at least 6 characters long\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const result = await auth.signInWithEmailLink(\r\n                email,\r\n                window.location.href\r\n            );\r\n            //   console.log(\"RESULT\", result);\r\n            if (result.user.emailVerified) {\r\n                // remove user email fom local storage\r\n                window.localStorage.removeItem(\"emailForRegistration\");\r\n                // get user id token\r\n                let user = auth.currentUser;\r\n                await user.updatePassword(password);\r\n                const idTokenResult = await user.getIdTokenResult();\r\n                // redux store\r\n                console.log(\"user\", user, \"idTokenResult\", idTokenResult);\r\n\r\n                createOrUpdateUser(idTokenResult.token)\r\n                    .then((res) => {\r\n                        dispatch({\r\n                            type: \"LOGGED_IN_USER\",\r\n                            payload: {\r\n                                name: res.data.name,\r\n                                email: res.data.email,\r\n                                token: idTokenResult.token,\r\n                                role: res.data.role,\r\n                                _id: res.data._id,\r\n                            },\r\n                        });\r\n                    })\r\n                    .catch((err) => console.log(err));\r\n\r\n                // redirect\r\n                history.push(\"/\");\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            toast.error(error.message);\r\n        }\r\n    };\r\n\r\n    const completeRegistrationForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <input type=\"email\" className=\"form-control\" value={email} disabled />\r\n\r\n            <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                placeholder=\"Password\"\r\n                autoFocus\r\n            />\r\n            <br />\r\n            <button type=\"submit\" className=\"btn btn-raised\">\r\n                Complete Registration\r\n      </button>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register Complete</h4>\r\n                    {completeRegistrationForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegisterComplete;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { auth } from \"../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n\r\nimport { useSelector } from \"react-redux\";\r\n\r\n\r\nconst ForgotPassword = ({ history }) => {\r\n    const [email, setEmail] = useState(\"ridwananik57@gmail.com\");\r\n    const { user } = useSelector(state => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) history.push('/')\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [user])\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    // const dispatch = useDispatch()\r\n\r\n    const handleSubmit = async (e) => {\r\n        setLoading(true)\r\n        // console.log(process.env.REACT_APP_REGISTER_REDIRECT_URL)\r\n        e.preventDefault();\r\n        const config = {\r\n            url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT_URL,\r\n            handleCodeInApp: true,\r\n        };\r\n\r\n\r\n        await auth.sendPasswordResetEmail(email, config)\r\n            .then(() => {\r\n                setLoading(false)\r\n                setEmail('')\r\n\r\n                toast.success('Email Sent')\r\n            })\r\n            .catch(error => {\r\n                setLoading(false)\r\n                console.log('error:', error)\r\n                toast.error(error.message)\r\n\r\n\r\n            })\r\n\r\n    };\r\n\r\n\r\n    const forgotPasswordForm = () => (\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className='form-group'>\r\n                <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder='Enter your email'\r\n                    autoFocus\r\n                />\r\n            </div>\r\n\r\n\r\n            <button disabled={!email || loading} type=\"submit\" className=\"btn btn-raised\">\r\n                Confirm Email\r\n          </button>\r\n\r\n\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {loading ? <h4 className='text-danger'>Loading... </h4> : <h4>Forgot Password</h4>}\r\n\r\n                    {forgotPasswordForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ForgotPassword;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst UserNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/history\" className=\"nav-link\">\r\n                    History\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    Password\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/wishlist\" className=\"nav-link\">\r\n                    Wishlist\r\n        </Link>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n);\r\n\r\nexport default UserNav;\r\n","import React from \"react\";\r\nimport UserNav from \"../../components/nav/UserNav\";\r\n\r\nconst History = () => (\r\n    <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n            <div className=\"col-md-2\">\r\n                <UserNav />\r\n            </div>\r\n            <div className=\"col\">user history page</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default History;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst LoadingToRedirect = () => {\r\n    const [count, setCount] = useState(5)\r\n    let history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setCount(c => --c)\r\n        }, 1000);\r\n        count === 0 && history.push('/')\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        return () => clearInterval(interval)\r\n    }, [count, history])\r\n    return (\r\n        <div className='container p-5 text-center'>\r\n            <p>Redirecting you in {count} seconds</p>\r\n        </div>\r\n    )\r\n}\r\nexport default LoadingToRedirect","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Route } from 'react-router-dom'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nconst UserRoute = ({ children, ...rest }) => {\r\n\r\n    const { user } = useSelector(state => ({ ...state }))\r\n    return user && user.token ?\r\n        <Route {...rest} />\r\n        : <LoadingToRedirect />\r\n}\r\n\r\nexport default UserRoute","import React, { useState } from \"react\";\r\nimport UserNav from \"../../components/nav/UserNav\";\r\nimport { auth } from \"../../firebase\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Password = () => {\r\n    const [password, setPassword] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        // console.log(password);\r\n\r\n        await auth.currentUser\r\n            .updatePassword(password)\r\n            .then(() => {\r\n                setLoading(false);\r\n                setPassword(\"\");\r\n                toast.success(\"Password updated\");\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                toast.error(err.message);\r\n            });\r\n    };\r\n\r\n    const passwordUpdateForm = () => (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Your Password</label>\r\n                <input\r\n                    type=\"password\"\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    className=\"form-control\"\r\n                    placeholder=\"Enter new password\"\r\n                    disabled={loading}\r\n                    value={password}\r\n                />\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    disabled={!password || password.length < 6 || loading}\r\n                >\r\n                    Submit\r\n        </button>\r\n            </div>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <UserNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                            <h4>Password Update</h4>\r\n                        )}\r\n                    {passwordUpdateForm()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Password;\r\n","import React from \"react\";\r\nimport UserNav from \"../../components/nav/UserNav\";\r\n\r\nconst Wishlist = () => (\r\n    <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n            <div className=\"col-md-2\">\r\n                <UserNav />\r\n            </div>\r\n            <div className=\"col\">user wishlist page</div>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default Wishlist;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Route } from 'react-router-dom'\r\nimport { currentAdmin } from '../../../functions/auth'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nconst AdminRoute = ({ children, ...rest }) => {\r\n\r\n    const { user } = useSelector(state => ({ ...state }))\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) {\r\n            currentAdmin(user.token)\r\n                .then(res => {\r\n                    setOk(true)\r\n                    console.log('CURRENT ADMIN RES', res)\r\n\r\n                })\r\n                .catch(err => {\r\n                    setOk(false)\r\n                    console.log('CURRENT ADMIN ERR', err)\r\n                })\r\n\r\n\r\n        }\r\n    }, [user])\r\n    return ok ?\r\n        <Route {...rest} />\r\n        : <LoadingToRedirect />\r\n}\r\n\r\nexport default AdminRoute","import React from \"react\";\r\nimport { Card } from \"antd\";\r\nimport { DeleteOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LaptopImg from '../../images/laptop.png'\r\nconst { Meta } = Card;\r\n\r\nconst AdminProductCard = ({ product, handleRemove }) => {\r\n    // destructure\r\n    const { title, description, images, slug } = product;\r\n\r\n    return (\r\n        <Card\r\n            cover={\r\n                <img\r\n                    alt={images && images.length ? images[0].public_id : \"\"}\r\n                    src={images && images.length ? images[0].url : LaptopImg}\r\n                    style={{ height: \"150px\", objectFit: \"cover\" }}\r\n                    className=\"p-1\"\r\n                />\r\n            }\r\n            actions={[\r\n                <Link to={`/admin/product/${slug}`}>\r\n                    <EditOutlined className='text-warning' />\r\n                </Link>\r\n                ,\r\n                <DeleteOutlined className='text-danger' onClick={e => handleRemove(slug)} />\r\n            ]}\r\n        >\r\n            <Meta title={title} description={`${description && description.substring(0, 20)}...`} />\r\n\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default AdminProductCard;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n                    Dashboard\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/product\" className=\"nav-link\">\r\n                    Product\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/products\" className=\"nav-link\">\r\n                    Products\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/category\" className=\"nav-link\">\r\n                    Category\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/sub\" className=\"nav-link\">\r\n                    Sub Category\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n                    Coupon\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    password\r\n                </Link>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport AdminProductCard from \"../../components/cards/AdminProductCard\";\r\nimport AdminNav from \"../../components/nav/AdminNav\";\r\nimport { getProductsByCount } from \"../../functions/product\";\r\n\r\nconst AdminDashboard = () => {\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col\">\r\n\r\n                    Admin Dashboard\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","\r\nimport React from 'react'\r\nconst CategoryForm = ({ handleSubmit, setName, name }) => (\r\n    <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setName(e.target.value)}\r\n                value={name}\r\n                autoFocus\r\n                required\r\n            />\r\n            <br />\r\n            <button  className=\"btn btn-outline-primary\">Save</button>\r\n        </div>\r\n    </form>\r\n);\r\nexport default CategoryForm","\r\n\r\nimport React from 'react'\r\n\r\nconst LocalSearch = ({ setKeyword, keyword }) => {\r\n    // const [keyword, setKeyword] = useState(\"\");\r\n    const handleSearchChange = (e) => {\r\n        e.preventDefault()\r\n        setKeyword(e.target.value)\r\n\r\n\r\n    }\r\n\r\n    return (\r\n\r\n        <div className='container' >\r\n            <input\r\n                type=\"search\"\r\n                placeholder='Filter'\r\n                value={keyword}\r\n                onChange={handleSearchChange}\r\n                className='form-control mb-4'\r\n            />\r\n\r\n        </div >\r\n\r\n    )\r\n}\r\nexport default LocalSearch","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    createCategory,\r\n    getCategories,\r\n    removeCategory,\r\n} from \"../../../functions/category\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons'\r\nimport CategoryForm from \"../../../components/forms/CategoryForms\";\r\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\r\n\r\nconst CategoryCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [keyword, setKeyword] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data));\r\n\r\n    const handleRemove = (slug) => {\r\n        let answer = window.confirm(`Are you sure you want to delete ${slug} ?`)\r\n        console.log(answer)\r\n        if (answer) {\r\n            setLoading(true)\r\n            removeCategory(slug, user.token)\r\n                .then(res => {\r\n                    console.log('res:', res)\r\n                    setLoading(false)\r\n                    toast.success(`${res.data.name} Deleted`)\r\n                    loadCategories()\r\n                })\r\n                .catch(err => {\r\n                    console.log('err:', err)\r\n                    setLoading(false)\r\n                    if (err.response.status === 400) toast.error(err.response.data);\r\n                    else toast.error(err.response.data);\r\n                })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n        setLoading(true);\r\n        createCategory({ name }, user.token)\r\n            .then((res) => {\r\n                // console.log(res)\r\n                setLoading(false);\r\n                setName(\"\");\r\n                toast.success(`\"${res.data.name}\" is created`);\r\n                loadCategories()\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n                else toast.error(err.response.data);\r\n            });\r\n    };\r\n\r\n\r\n    const searchCallBack = (search) => (c) => c.name.toLowerCase().includes(search.toLowerCase())\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                        <h4>Create category</h4>\r\n                    )}\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n\r\n                    <LocalSearch keyword={keyword} setKeyword={setKeyword} />\r\n                    {categories.filter(searchCallBack(keyword)).map((c, id) => (\r\n                        <div key={id} className='alert alert-secondary'>\r\n                            {c.name} <span className='btn btn-sm float-right'>\r\n\r\n                                <DeleteOutlined disabled={loading}\r\n                                    onClick={() => handleRemove(c.slug)}\r\n                                    className='text-danger' /></span>{\" \"}\r\n                            <Link to={`/admin/category/${c.slug}`}>\r\n\r\n\r\n                                <span className='btn btn-sm float-right'> <EditOutlined className='text-warning' /></span>{\" \"}\r\n\r\n\r\n\r\n                            </Link>\r\n                        </div>\r\n\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoryCreate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    getCategory,\r\n    updateCategory\r\n} from \"../../../functions/category\";\r\nimport CategoryForm from \"../../../components/forms/CategoryForms\";\r\n\r\n\r\nconst CategoryUpdate = ({ history, match: { params } }) => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [name, setName] = useState('');\r\n\r\n    useEffect(() => {\r\n        getCategory(params.slug).then(res => {\r\n            setName(res.data.name)\r\n            console.log(res)\r\n        })\r\n            .catch(err => console.log(err))\r\n    }, [params]);\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n\r\n        setLoading(true);\r\n        updateCategory(params.slug, { name }, user.token)\r\n            .then((res) => {\r\n                // console.log(res)\r\n                setLoading(false);\r\n                toast.success(`\"${res.data.name}\" is updated`);\r\n                setName('')\r\n\r\n                history.push('/admin/category')\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n                else toast.error(err.response.data);\r\n            });\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                        <h4>Create category</h4>\r\n                    )}\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n                    <hr />\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoryUpdate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    createSub,\r\n    getSubs,\r\n    removeSub,\r\n} from \"../../../functions/sub\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons'\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport CategoryForm from \"../../../components/forms/CategoryForms\";\r\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\r\nimport { getCategories } from \"../../../functions/category\";\r\n\r\nconst SubCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [keyword, setKeyword] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [subs, setSubs] = useState([]);\r\n    const [category, setCategory] = useState([]);\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        loadSubs()\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data));\r\n\r\n    const loadSubs = () =>\r\n        getSubs().then((c) => setSubs(c.data));\r\n\r\n    const handleRemove = (slug) => {\r\n        let answer = window.confirm(`Are you sure you want to delete ${slug} ?`)\r\n        console.log(answer)\r\n        if (answer) {\r\n            setLoading(true)\r\n            removeSub(slug, user.token)\r\n                .then(res => {\r\n                    console.log('res:', res)\r\n                    setLoading(false)\r\n                    toast.error(`${res.data.name} Deleted`)\r\n                    loadSubs()\r\n                })\r\n                .catch(err => {\r\n                    console.log('err:', err)\r\n                    setLoading(false)\r\n                    if (err.response.status === 400) toast.error(err.response.data);\r\n                    else toast.error(err.response.data);\r\n                })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n        setLoading(true);\r\n        createSub({ name, parent: category }, user.token)\r\n            .then((res) => {\r\n                // console.log(res)\r\n                setLoading(false);\r\n                setName(\"\");\r\n                toast.success(`\"${res.data.name}\" is created`);\r\n                loadSubs()\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n                else toast.error(err.response.data);\r\n            });\r\n    };\r\n\r\n\r\n    const searchCallBack = (search) => (c) => c.name.toLowerCase().includes(search.toLowerCase())\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                        <h4>Create sub category</h4>\r\n                    )}\r\n\r\n                    <div className='form-group'>\r\n                        <label>Parent Category</label>\r\n                        <select name='category' className='form-control'\r\n                            onChange={e => setCategory(e.target.value)}\r\n                        >\r\n                            <option>Please Select</option>\r\n                            {categories.length > 0 && categories.map((c, id) => (\r\n                                <option key={c._id} value={c._id}>{c.name}</option>\r\n\r\n                            ))}\r\n\r\n\r\n\r\n                        </select>\r\n\r\n                    </div>\r\n\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n\r\n\r\n                    <LocalSearch keyword={keyword} setKeyword={setKeyword} />\r\n                    {subs.filter(searchCallBack(keyword)).map((c, id) => (\r\n                        <div key={id} className='alert alert-secondary'>\r\n                            {c.name} <span className='btn btn-sm float-right'>\r\n\r\n                                <DeleteOutlined disabled={loading}\r\n                                    onClick={() => handleRemove(c.slug)}\r\n                                    className='text-danger' /></span>{\" \"}\r\n                            <Link to={`/admin/sub/${c.slug}`}>\r\n\r\n\r\n                                <span className='btn btn-sm float-right'> <EditOutlined className='text-warning' /></span>{\" \"}\r\n\r\n\r\n\r\n                            </Link>\r\n                        </div>\r\n\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubCreate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getCategories } from \"../../../functions/category\";\r\nimport { updateSub, getSub } from \"../../../functions/sub\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport CategoryForm from \"../../../components/forms/CategoryForms\";\r\nimport LocalSearch from \"../../../components/forms/LocalSearch\";\r\n\r\nconst SubUpdate = ({ match, history }) => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n    const [parent, setParent] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n        loadSub();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => {\r\n            console.log(c.data)\r\n            setCategories(c.data)\r\n\r\n        }\r\n        );\r\n\r\n    const loadSub = () =>\r\n        getSub(match.params.slug).then((s) => {\r\n            setName(s.data.name);\r\n            console.log('s.data.name:', s.data.name)\r\n            setParent(s.data.parent);\r\n        }).catch(err => console.log('load subs', err))\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // console.log(name);\r\n        setLoading(true);\r\n        updateSub(match.params.slug, { name, parent }, user.token)\r\n            .then((res) => {\r\n                // console.log(res)\r\n                setLoading(false);\r\n                setName(\"\");\r\n                toast.success(`\"${res.data.name}\" is updated`);\r\n                history.push(\"/admin/sub\");\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                setLoading(false);\r\n                if (err.response.status === 400) toast.error(err.response.data);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading..</h4>\r\n                    ) : (\r\n                        <h4>Update sub category</h4>\r\n                    )}\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Parent category</label>\r\n                        <select\r\n                            name=\"category\"\r\n                            className=\"form-control\"\r\n                            onChange={(e) => setParent(e.target.value)}\r\n                        >\r\n                            <option>Please select</option>\r\n                            {categories.length > 0 &&\r\n                                categories.map((c) => (\r\n                                    <option key={c._id} value={c._id} selected={c._id === parent}>\r\n                                        {c.name}\r\n                                    </option>\r\n                                ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SubUpdate;\r\n","import React from 'react'\r\nimport { Typography, Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\nconst ProductCreateForm = (props) => {\r\n\r\n    const { setValues, handleSubmit, handleChange, values, handleCategoryChange, subOptions } = props\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        subs,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand,\r\n    } = values;\r\n    return (\r\n\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    className=\"form-control\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    className=\"form-control\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    className=\"form-control\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    {colors.map((c,i) => (\r\n                        <option key={i} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Brand</label>\r\n                <select\r\n                    name=\"brand\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    {brands.map((b,i) => (\r\n                        <option key={i} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n            <div className='form-group'>\r\n                <label>Category</label>\r\n                <select name='category' className='form-control'\r\n                    onChange={handleCategoryChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    {categories.length > 0 && categories.map((c, id) => (\r\n                        <option key={c._id} value={c._id}>{c.name}</option>\r\n\r\n                    ))}\r\n\r\n\r\n\r\n                </select>\r\n\r\n            </div>\r\n\r\n            {subOptions.length > 0 &&\r\n                <div>\r\n                    <label>Sub Category</label>\r\n                    <Select\r\n                        mode=\"multiple\"\r\n                        style={{ width: \"100%\" }}\r\n                        placeholder=\"Please select\"\r\n                        defaultValue={[\"a10\", \"c12\"]}\r\n                        onChange={val => setValues({ ...values, subs: val })}\r\n                        name='subs'\r\n                        value={subs}\r\n                    >\r\n                        {subOptions.map((c, id) => (\r\n                            <Option key={c._id} value={c._id}>{c.name}</Option>\r\n\r\n                        ))}\r\n\r\n                    </Select>\r\n                </div>\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductCreateForm\r\n","import React from 'react'\r\nimport Resizer from 'react-image-file-resizer';\r\nimport axios from 'axios'\r\nimport { useSelector } from 'react-redux';\r\nimport { Avatar, Badge } from 'antd';\r\nimport { toast } from 'react-toastify';\r\nimport LaptopImg from '../../images/laptop.png'\r\n\r\nconst resizeFile = (file) => new Promise(resolve => {\r\n    Resizer.imageFileResizer(file, 720, 720, 'JPEG', 100, 0,\r\n        uri => {\r\n            resolve(uri);\r\n        },\r\n        'base64'\r\n    );\r\n});\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n    const { user } = useSelector(state => ({ ...state }))\r\n\r\n    const fileUploadAndResize = (e) => {\r\n        let files = e.target.files\r\n        console.log('e.target.files:', e.target.files)\r\n        let allUploadedFiles = values ? values.images : []\r\n        if (files.length > 0) {\r\n            setLoading(true)\r\n            for (let i = 0; i < files.length; i++) {\r\n                resizeFile(files[i])\r\n                    .then(uri => {\r\n                        console.log(uri)\r\n                        axios.post(`${process.env.REACT_APP_API}/uploadimages`, {\r\n                            image: uri\r\n                        }, {\r\n                            headers: {\r\n                                authtoken: user ? user.token : ''\r\n                            }\r\n                        }).then(res => {\r\n                            console.log('IMAGE UPLOAD RES DATA', res)\r\n\r\n                            toast.success('Uploaded')\r\n                            setLoading(false)\r\n                            allUploadedFiles.push(res.data)\r\n                        })\r\n                            .catch(err => {\r\n                                console.log('IMAGE POST FAILED', err)\r\n                            })\r\n\r\n\r\n                    })\r\n                    .catch(err => {\r\n                        console.log('IMAGE RESIZE FAILED', err)\r\n                    })\r\n            }\r\n            setValues({ ...values, images: allUploadedFiles })\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    const handleImageRemove = (public_id) => {\r\n        console.log('id:', public_id)\r\n        setLoading(true)\r\n        axios.post(`${process.env.REACT_APP_API}/removeimage`, {\r\n            public_id\r\n        }, {\r\n            headers: {\r\n                authtoken: user.token\r\n            }\r\n        }).then(res => {\r\n            console.log('IMAGE UPLOAD RES DATA', res)\r\n\r\n            let filteredImages = values.images.filter(image => image.public_id !== public_id)\r\n            setValues({ ...values, images: filteredImages })\r\n            setLoading(false)\r\n            // allUploadedFiles.push(res.data)\r\n        }).catch(err => {\r\n            setLoading(false)\r\n            console.log(err)\r\n        })\r\n    }\r\n    return (\r\n        <>\r\n\r\n\r\n            <div className='row'>\r\n\r\n                {values.images && values.images.map((image, i) => (\r\n                    <Badge count='X' key={i}\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={() => handleImageRemove(image.public_id)}\r\n\r\n                    >\r\n\r\n                        <Avatar\r\n                            src={image.url} size={100}\r\n                            shape='square'\r\n                            className='m-3'\r\n                        >\r\n                            Product Image\r\n                    </Avatar>\r\n                    </Badge>\r\n\r\n\r\n                ))}\r\n\r\n            </div>\r\n            <div className='row'>\r\n                <label className='btn btn-primary btn-raised mb-4'>\r\n                    Choose File\r\n                     <input\r\n                        type='file'\r\n                        hidden\r\n                        multiple\r\n                        accept='images/*'\r\n                        onChange={fileUploadAndResize}\r\n\r\n                    />\r\n                </label>\r\n\r\n            </div>\r\n\r\n\r\n\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default FileUpload\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    createProduct,\r\n\r\n} from \"../../../functions/product\";\r\n\r\n\r\n\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport ProductCreateForm from \"../../../components/forms/ProductCreateForm\";\r\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\r\nimport FileUpload from \"../../../components/forms/FileUpload\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nconst initialState = {\r\n    title: \"Nokia x7\",\r\n    description: \"Best Phone\",\r\n    price: \"25500\",\r\n    categories: [],\r\n    category: \"\",\r\n    subs: [],\r\n    shipping: \"Yes\",\r\n    quantity: \"50\",\r\n    images: [\r\n        //     {\r\n        //     \"public_id\": \"x0vydnubetho0d04tkfi\",\r\n        //     \"url\": \"https://res.cloudinary.com/dhhstdwuq/image/upload/v1614983744/x0vydnubetho0d04tkfi.jpg\"\r\n        // },\r\n        // {\r\n        //     \"public_id\": \"owjhdb8gzazgfwnddisf\",\r\n        //     \"url\": \"https://res.cloudinary.com/dhhstdwuq/image/upload/v1614983874/owjhdb8gzazgfwnddisf.jpg\"\r\n        // }\r\n    ],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n    color: \"Black\",\r\n    brand: \"Nokia\",\r\n};\r\n\r\nconst ProductCreate = () => {\r\n    const [values, setValues] = useState(initialState);\r\n    const { user } = useSelector(state => ({ ...state }))\r\n    const [subOptions, setSubOptions] = useState([]);\r\n    const [loading, setLoading] = useState(false)\r\n    const [key, setKey] = useState(\"1\")\r\n\r\n    useEffect(() => {\r\n        console.log('use effect product create')\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) =>\r\n            setValues({ ...values, categories: c.data })\r\n\r\n\r\n        )\r\n            .catch(err => console.log(err))\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        createProduct(values, user.token)\r\n            .then(res => {\r\n\r\n                window.alert(`\"${res.data.title}\" is created`);\r\n                window.location.reload()\r\n                setValues(initialState)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n\r\n                // if (err.response.status === 400) toast.error(err.response.message);\r\n                // else\r\n                toast.error(err.response.data.err);\r\n            })\r\n        //\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setValues((prev) => ({\r\n            ...prev,\r\n            [e.target.name]: e.target.value\r\n\r\n        }))\r\n        // console.log(e.target.name, '------------', e.target.value)\r\n        //\r\n    };\r\n\r\n    const handleCategoryChange = (e) => {\r\n        e.preventDefault()\r\n        console.log('handleCategoryChange', e.target.value)\r\n        setValues((prev) => ({\r\n            ...prev,\r\n            [e.target.name]: e.target.value,\r\n            subs: []\r\n        }))\r\n        getCategorySubs(e.target.value).then(res => {\r\n\r\n            console.log(res.data)\r\n            setSubOptions(res.data)\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        // console.log(e.target.name, '------------', e.target.value)\r\n        //\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col-md-10\">\r\n                    {loading ? <LoadingOutlined className='text-danger h1' /> : <h4>Product create</h4>}\r\n                    <hr />\r\n                    <div className='p-3'>\r\n                        <FileUpload\r\n                            key={key}\r\n                            setKey={setKey}\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                        />\r\n\r\n                    </div>\r\n\r\n\r\n                    <ProductCreateForm\r\n                        handleSubmit={handleSubmit}\r\n                        handleChange={handleChange}\r\n                        values={values}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        subOptions={subOptions}\r\n                        setValues={setValues}\r\n                    />\r\n\r\n\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductCreate;\r\n\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport AdminProductCard from \"../../../components/cards/AdminProductCard\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { getProductsByCount, removeProduct } from \"../../../functions/product\";\r\n\r\n\r\nconst AllProducts = () => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadAllProducts();\r\n    }, []);\r\n\r\n    const handleRemove = (slug) => {\r\n        let answer = window.confirm(`Are you sure you want to delete ?`)\r\n        console.log(answer)\r\n        if (answer) {\r\n            setLoading(true)\r\n            removeProduct(slug, user.token)\r\n                .then(res => {\r\n                    console.log('res:', res)\r\n                    setLoading(false)\r\n                    toast.success(`${res.data.title} Deleted`)\r\n                    loadAllProducts()\r\n                })\r\n                .catch(err => {\r\n                    console.log('err:', err)\r\n                    setLoading(false)\r\n\r\n                    toast.error(err.response.data);\r\n                })\r\n\r\n        }\r\n\r\n    }\r\n    const loadAllProducts = () => {\r\n        setLoading(true);\r\n        getProductsByCount(100)\r\n            .then((res) => {\r\n                setProducts(res.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                        <h4>All Products</h4>\r\n                    )}\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                            <div key={product._id} className=\"col-md-4 mb-4\">\r\n                                <AdminProductCard product={product} handleRemove={handleRemove} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllProducts;\r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst ProductUpdateForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    setValues,\r\n    values,\r\n    handleCategoryChange,\r\n    categories,\r\n    subOptions,\r\n    arrayOfSubs,\r\n    setArrayOfSubs,\r\n    selectedCategory,\r\n}) => {\r\n    // destructure\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        category,\r\n        subs,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand,\r\n    } = values;\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    className=\"form-control\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    className=\"form-control\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    value={shipping === \"Yes\" ? \"Yes\" : \"No\"}\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    className=\"form-control\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    value={color}\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    {colors.map((c, i) => (\r\n                        <option key={i} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Brand</label>\r\n                <select\r\n                    value={brand}\r\n                    name=\"brand\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    {brands.map((b,i) => (\r\n                        <option key={i} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Category</label>\r\n                <select\r\n                    name=\"category\"\r\n                    className=\"form-control\"\r\n                    onChange={handleCategoryChange}\r\n                    value={selectedCategory ? selectedCategory : category._id}\r\n                >\r\n                    {categories.length > 0 &&\r\n                        categories.map((c) => (\r\n                            <option key={c._id} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <label>Sub Categories</label>\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    style={{ width: \"100%\" }}\r\n                    placeholder=\"Please select\"\r\n                    value={arrayOfSubs}\r\n                    onChange={(value) => setArrayOfSubs(value)}\r\n                >\r\n                    {subOptions.length &&\r\n                        subOptions.map((s) => (\r\n                            <Option key={s._id} value={s._id}>\r\n                                {s.name}\r\n                            </Option>\r\n                        ))}\r\n                </Select>\r\n            </div>\r\n\r\n            <br />\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default ProductUpdateForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProduct, updateProduct } from '../../../functions/product'\r\nimport { getCategorySubs, getCategory, getCategories } from '../../../functions/category'\r\nimport { LoadingOutlined } from '@ant-design/icons'\r\nimport ProductUpdateForm from \"../../../components/forms/ProductUpdateForm\";\r\nimport FileUpload from \"../../../components/forms/FileUpload\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nconst initialState = {\r\n  title: \"\",\r\n  description: \"\",\r\n  price: \"\",\r\n  category: \"\",\r\n  subs: [],\r\n  shipping: \"\",\r\n  quantity: \"\",\r\n  images: [],\r\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n  color: \"\",\r\n  brand: \"\",\r\n};\r\n\r\nconst ProductUpdate = ({ match, history }) => {\r\n  // state\r\n  const [values, setValues] = useState(initialState);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subOptions, setSubOptions] = useState([]);\r\n  const [arrayOfSubs, setArrayOfSubs] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  // router\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    loadProduct();\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadProduct = () => {\r\n    getProduct(slug).then((p) => {\r\n      // console.log(\"single product\", p);\r\n      // 1 load single proudct\r\n      setValues({ ...values, ...p.data });\r\n      // 2 load single product category subs\r\n      getCategorySubs(p.data.category._id).then((res) => {\r\n        setSubOptions(res.data); // on first load, show default subs\r\n      });\r\n      // 3 prepare array of sub ids to show as default sub values in antd Select\r\n      let arr = [];\r\n      p.data.subs.map((s) => {\r\n        arr.push(s._id);\r\n      });\r\n      console.log(\"ARR\", arr);\r\n      setArrayOfSubs((prev) => arr); // required for ant design select to work\r\n    });\r\n  };\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => {\r\n      console.log(\"GET CATEGORIES IN UPDATE PRODUCT\", c.data);\r\n      setCategories(c.data);\r\n    });\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    values.subs = arrayOfSubs;\r\n    values.category = selectedCategory ? selectedCategory : values.category;\r\n\r\n    updateProduct(slug, values, user.token)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        toast.success(`\"${res.data.title}\" is updated`);\r\n        history.push(\"/admin/products\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        toast.error(err.response.data.err);\r\n      });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n    // console.log(e.target.name, \" ----- \", e.target.value);\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"CLICKED CATEGORY\", e.target.value);\r\n    setValues({ ...values, subs: [] });\r\n\r\n    setSelectedCategory(e.target.value);\r\n\r\n    getCategorySubs(e.target.value).then((res) => {\r\n      console.log(\"SUB OPTIONS ON CATEGORY CLICK\", res);\r\n      setSubOptions(res.data);\r\n    });\r\n\r\n    console.log(\"EXISTING CATEGORY values.category\", values.category);\r\n\r\n    // if user clicks back to the original category\r\n    // show its sub categories in default\r\n    if (values.category._id === e.target.value) {\r\n      loadProduct();\r\n    }\r\n    // clear old sub category ids\r\n    setArrayOfSubs([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n\r\n        <div className=\"col-md-10\">\r\n          {loading ? (\r\n            <LoadingOutlined className=\"text-danger h1\" />\r\n          ) : (\r\n            <h4>Product update</h4>\r\n          )}\r\n\r\n          {/* {JSON.stringify(values)} */}\r\n\r\n          <div className=\"p-3\">\r\n            <FileUpload\r\n              values={values}\r\n              setValues={setValues}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n\r\n          <ProductUpdateForm\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n            setValues={setValues}\r\n            values={values}\r\n            handleCategoryChange={handleCategoryChange}\r\n            categories={categories}\r\n            subOptions={subOptions}\r\n            arrayOfSubs={arrayOfSubs}\r\n            setArrayOfSubs={setArrayOfSubs}\r\n            selectedCategory={selectedCategory}\r\n          />\r\n          <hr />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductUpdate;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ProductListItems = ({ product }) => {\r\n  const {\r\n    price,\r\n    category,\r\n    subs,\r\n    shipping,\r\n    color,\r\n    brand,\r\n    quantity,\r\n    sold,\r\n  } = product;\r\n\r\n  return (\r\n    <ul className=\"list-group\">\r\n      <li className=\"list-group-item\">\r\n        Price{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          $ {price}\r\n        </span>\r\n      </li>\r\n\r\n      {category && (\r\n        <li className=\"list-group-item\">\r\n          Category{\" \"}\r\n          <Link\r\n            to={`/category/${category.slug}`}\r\n            className=\"label label-default label-pill pull-xs-right\"\r\n          >\r\n            {category.name}\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {subs && (\r\n        <li className=\"list-group-item\">\r\n          Sub Categories\r\n          {subs.map((s) => (\r\n            <Link\r\n              key={s._id}\r\n              to={`/sub/${s.slug}`}\r\n              className=\"label label-default label-pill pull-xs-right\"\r\n            >\r\n              {s.name}\r\n            </Link>\r\n          ))}\r\n        </li>\r\n      )}\r\n\r\n      <li className=\"list-group-item\">\r\n        Shipping{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {shipping}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Color{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {color}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Brand{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {brand}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Available{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {quantity}\r\n        </span>\r\n      </li>\r\n\r\n      <li className=\"list-group-item\">\r\n        Sold{\" \"}\r\n        <span className=\"label label-default label-pill pull-xs-right\">\r\n          {sold}\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ProductListItems;\r\n","import React, { useState } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { StarOutlined } from \"@ant-design/icons\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nconst RatingModal = ({ children, onOkClick }) => {\r\n    const { user } = useSelector((state) => ({ ...state }));\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n\r\n    let history = useHistory();\r\n    let { slug } = useParams();\r\n\r\n    const handleModal = () => {\r\n        if (user && user.token) {\r\n            setModalVisible(true);\r\n        } else {\r\n            history.push({\r\n                pathname: \"/login\",\r\n                state: { from: `/product/${slug}` },\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div onClick={handleModal}>\r\n                <StarOutlined className=\"text-danger\" /> <br />{\" \"}\r\n                {user ? \"Leave rating\" : \"Login to leave rating\"}\r\n            </div>\r\n            <Modal\r\n                title=\"Leave your rating\"\r\n                centered\r\n                visible={modalVisible}\r\n                onOk={() => {\r\n                    setModalVisible(false);\r\n                    toast.success(\"Thanks for your review. It will apper soon\");\r\n                    onOkClick()\r\n                }}\r\n                onCancel={() => setModalVisible(false)}\r\n            >\r\n                {children}\r\n            </Modal>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RatingModal;\r\n","import React, { useState } from \"react\";\r\nimport { Card, Tabs } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { HeartOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\r\nimport { Carousel } from \"react-responsive-carousel\";\r\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\r\nimport Laptop from \"../../images/laptop.png\";\r\nimport ProductListItems from \"./ProductListItems\";\r\nimport ReactStars from 'react-stars'\r\nimport RatingModal from \"../modal/RatingModal\";\r\nimport { showAverage } from \"../../functions/ratings\";\r\n\r\nconst { Meta } = Card;\r\nconst { TabPane } = Tabs;\r\n\r\nconst SingleProduct = ({ product, onStarClick, rating, onOkClick }) => {\r\n    const { title, images, description } = product;\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            <div className=\"col-md-7\">\r\n                {images && images.length ? (\r\n                    <Carousel\r\n                        showArrows={true} autoPlay infiniteLoop >\r\n                        {images && images.map((i) => <img alt={i.public_id} src={i.url} />)}\r\n                    </Carousel>\r\n                ) : (\r\n                    <Card cover={<img src={Laptop} className=\"mb-3 card-image\" />}></Card>\r\n                )}\r\n\r\n                <Tabs type='card' defaultActiveKey=\"1\">\r\n                    <TabPane tab=\"Description\" key=\"1\">\r\n                        {description ? description : 'No description for this product'}\r\n                    </TabPane>\r\n                    <TabPane tab=\"More\" key=\"2\">\r\n                        Tab 2\r\n                        </TabPane>\r\n\r\n                </Tabs>\r\n            </div>\r\n\r\n            <div className=\"col-md-5 text-cente\">\r\n                <h1 className='bg-info p-3'> {title}</h1>\r\n               rating\r\n\r\n               {product && product.ratings && product.ratings.length > 0 ? showAverage(product) : <div className='text-center pt-2 pb-3 '> No rating yet</div>}\r\n\r\n                <Card\r\n                    actions={[\r\n                        <>\r\n                            <ShoppingCartOutlined className=\"text-success\" /> <br />\r\n              Add to Cart\r\n            </>,\r\n                        <Link to=\"/\">\r\n                            <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\r\n                           </Link>,\r\n\r\n                        <Link> <RatingModal onOkClick={onOkClick}><ReactStars\r\n                            count={5}\r\n                            onChange={onStarClick}\r\n                            size={54}\r\n                            value={rating}\r\n                            color2={'#660000'}\r\n\r\n                            half={false}\r\n\r\n                        /></RatingModal></Link>,\r\n                    ]\r\n\r\n                    }\r\n\r\n                >\r\n\r\n                    <ProductListItems product={product} />\r\n\r\n                </Card>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SingleProduct;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getProduct, getRelated, productStar } from '../functions/product'\r\nimport SingleProduct from '../components/cards/SingleProduct'\r\nimport { useSelector } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport LoadingCard from '../components/cards/LoadingCard'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nimport { Pagination } from 'antd'\r\nimport { showAverage } from '../functions/ratings'\r\n\r\nconst Product = ({ match: { params } }) => {\r\n    const [product, setProduct] = useState({})\r\n    const [relatedProduct, setRelatedProduct] = useState({})\r\n    const [rating, setRating] = useState()\r\n    const [loading, setLoading] = useState(false)\r\n    const { user } = useSelector(state => ({ ...state }))\r\n\r\n    const onStarClick = (rating) => {\r\n        console.log('rating:', rating)\r\n        setRating(() => rating)\r\n\r\n\r\n    }\r\n    const onOkClick = () => {\r\n        productStar(product._id, rating, user.token)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                toast.success(`Rating updated: ${res.data}`)\r\n                // loadSingleProduct()\r\n            }).catch(er => {\r\n                console.log(er)\r\n            })\r\n\r\n    }\r\n    useEffect(() => {\r\n        console.log('back')\r\n        loadSingleProduct()\r\n\r\n    }, [user, params.slug])\r\n\r\n\r\n\r\n    const loadSingleProduct = () => {\r\n        getProduct(params.slug).then(res => {\r\n\r\n            setProduct(res.data)\r\n            console.log('user_id', user ? user._id : '')\r\n            console.log('ratings', product.ratings)\r\n\r\n            if (product.ratings && user) {\r\n                let existingRatingObject = product.ratings.find(\r\n                    (ele) => ele.postedBy.toString() === user._id.toString()\r\n                );\r\n                existingRatingObject && setRating(() => existingRatingObject.star); // current user's star\r\n            }\r\n            console.log('Rating mounted: ', rating)\r\n\r\n            getRelated(product._id).then(res => {\r\n                console.log('related', res.data)\r\n                setRelatedProduct(res.data)\r\n                // loadSingleProduct()\r\n            }).catch(err => {\r\n                console.log(err)\r\n            })\r\n        })\r\n\r\n\r\n    }\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className='row pt-4 h-75' >\r\n                <SingleProduct product={product}\r\n                    onOkClick={onOkClick}\r\n                    onStarClick={onStarClick} rating={rating} />\r\n\r\n            </div>\r\n            <div className='row'>\r\n                <div className='col text-center pt-5 pb-5'>\r\n                    <hr />\r\n                    <h4>Related Product </h4>\r\n\r\n\r\n                    <div className=\"container\">\r\n\r\n                        {/* {JSON.stringify(relatedProduct)} */}\r\n                        <div className=\"row\">\r\n                            {relatedProduct && relatedProduct.length > 0 ? relatedProduct.map((product) => (\r\n                                <div key={product._id} className=\"col-md-4 mb-4\">\r\n                                    {product && product.ratings && product.ratings.length > 0 ? showAverage(product) : <div className='text-center pt-2 pb-3 '> No rating yet</div>}\r\n                                    <ProductCard key={product._id}\r\n                                        product={product}\r\n                                    />\r\n                                </div>\r\n                            )) :\r\n                                'No Related Product'\r\n                            }\r\n\r\n                        </div>\r\n\r\n\r\n\r\n                    </div>\r\n                    <hr />\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Product\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategory } from \"../../functions/category\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ProductCard from \"../../components/cards/ProductCard\";\r\nimport CategoryList from \"../../components/category/CategoryList\";\r\n\r\nconst CategoryHome = ({ match }) => {\r\n  const [category, setCategory] = useState({});\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getCategory(slug).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setCategory(res.data.category);\r\n      setProducts(res.data.products);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              Loading...\r\n            </h4>\r\n          ) : (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              {products.length} Products in \"{category.name}\" category\r\n            </h4>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {products.map((p) => (\r\n          <div className=\"col-md-4\" key={p._id}>\r\n            <ProductCard product={p} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryHome;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ProductCard from \"../../components/cards/ProductCard\";\r\nimport { getSub } from \"../../functions/sub\";\r\n\r\n\r\nconst SubHome = ({ match }) => {\r\n  const [subs, setSubs] = useState({});\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { slug } = match.params;\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getSub(slug).then((res) => {\r\n      console.log(JSON.stringify(res.data, null, 4));\r\n      setSubs(res.data.sub);\r\n      setProducts(res.data.products);\r\n      setLoading(false);\r\n    }).catch(err=>{\r\n        setLoading(false)\r\n        console.log(err)\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              Loading...\r\n            </h4>\r\n          ) : (\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n              {products.length > 0 ? <>{ products.length } Products in {subs.name} Sub category </> : <>No Product  in this Sub category</>} \r\n            </h4>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        {products.map((p) => (\r\n          <div className=\"col-md-4\" key={p._id}>\r\n            <ProductCard product={p} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubHome;","import { Pagination, Skeleton } from \"antd\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport LoadingCard from \"../components/cards/LoadingCard\";\r\nimport ProductCard from \"../components/cards/ProductCard\";\r\nimport { getProductsByCount, getSearchProducts } from \"../functions/product\";\r\nimport { showAverage } from \"../functions/ratings\";\r\n\r\n\r\n\r\nconst Shop = () => {\r\n    const { search } = useSelector((state) => ({ ...state }));\r\n    const [products, setProducts] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    // const text = search && query.text ? query.text : ''\r\n    const { text } = search\r\n\r\n\r\n\r\n\r\n\r\n    //by default\r\n    useEffect(() => {\r\n\r\n        loadAllProducts()\r\n    }, []);\r\n    //search\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            loadSearchProducts(text)\r\n        }, 400)\r\n        return () => clearTimeout(delayed)\r\n\r\n    }, [text])\r\n\r\n\r\n    const loadSearchProducts = (text) => {\r\n        getSearchProducts({ query: text })\r\n            .then((res) => {\r\n                setProducts(res.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true);\r\n        getProductsByCount(20)\r\n            .then((res) => {\r\n                setProducts(res.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    return (\r\n\r\n\r\n\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n\r\n                <div className='col-md-3'>\r\n                    <h4>Filters</h4>\r\n\r\n                </div>\r\n\r\n                <div className='col-md-9'>\r\n                    <div className=\"row\">\r\n\r\n                        {loading ? (\r\n                            <LoadingCard count={12} />\r\n                        ) :\r\n\r\n                            (\r\n\r\n                                products.map((product) => (\r\n                                    <div key={product._id} className=\"col-md-4 mb-4\">\r\n                                        {product && product.ratings && product.ratings.length > 0 ? showAverage(product) :\r\n                                            <div className='text-center pt-2 pb-3 '> No rating yet</div>}\r\n                                        <ProductCard\r\n                                            product={product}\r\n                                        />\r\n                                    </div>\r\n                                ))\r\n\r\n                            )\r\n\r\n\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div >\r\n\r\n\r\n\r\n\r\n    );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport Login from \"./pages/auth/Login\";\nimport Register from \"./pages/auth/Register\";\nimport Home from \"./pages/Home\";\nimport Header from \"./components/nav/Header\";\nimport RegisterComplete from \"./pages/auth/RegisterComplete\";\nimport ForgotPassword from \"./pages/auth/ForgotPassword\";\n\nimport { auth } from \"./firebase\";\nimport { useDispatch } from \"react-redux\";\nimport { currentUser } from \"./functions/auth\";\nimport History from \"./pages/user/History\";\nimport UserRoute from \"./components/nav/routes/UserRoute\";\nimport Password from \"./pages/user/Password\";\nimport Wishlist from \"./pages/user/Wishlist\";\nimport AdminRoute from \"./components/nav/routes/AdminRoute\";\nimport AdminDashboard from \"./pages/admin/AdminDashboard\";\nimport CategoryCreate from \"./pages/admin/category/CategoryCreate\";\nimport CategoryUpdate from \"./pages/admin/category/CategoryUpdate\";\nimport SubCreate from \"./pages/admin/sub/SubCreate\";\nimport SubUpdate from \"./pages/admin/sub/SubUpdate\";\nimport ProductCreate from \"./pages/admin/product/ProductCreate\";\nimport AllProducts from \"./pages/admin/product/AllProducts\";\nimport ProductUpdate from \"./pages/admin/product/ProductUpdate\";\nimport Product from \"./pages/Product\";\nimport CategoryHome from \"./pages/category/CategoryHome\";\nimport SubHome from \"./pages/subs/SubHome\";\nimport Shop from \"./pages/Shop\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n\n  // to check firebase auth state\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        console.log(\"user\", user);\n\n        currentUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch((err) => console.log(err));\n      }\n    });\n    // cleanup\n    return () => unsubscribe();\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <UserRoute exact path=\"/user/history\" component={History} />\n        <UserRoute exact path=\"/user/password\" component={Password} />\n        <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n\n        <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        <AdminRoute exact path=\"/admin/category/:slug\" component={CategoryUpdate} />\n\n        <AdminRoute exact path=\"/admin/sub\" component={SubCreate} />\n        <AdminRoute exact path=\"/admin/sub/:slug\" component={SubUpdate} />\n\n        <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute exact path=\"/admin/product/:slug\" component={ProductUpdate} />\n        <Route exact path=\"/product/:slug\" component={Product} />\n        <Route exact path=\"/category/:slug\" component={CategoryHome} />\n        <Route exact path=\"/sub/:slug\" component={SubHome} />\n        <Route exact path=\"/shop\" component={Shop} />\n\n\n      </Switch>\n    </>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from 'redux'\r\nimport { searchReducer } from './searchReducer';\r\nimport { userReducer } from './userReducer';\r\n\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    user: userReducer,\r\n    search: searchReducer\r\n});\r\n\r\nexport default rootReducer\r\n","\r\n\r\nexport const userReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOGGED_IN_USER\":\r\n            return action.payload\r\n        case \"LOGOUT\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","\r\n\r\nexport const searchReducer = (state = { text: '' }, action) => {\r\n    switch (action.type) {\r\n        case \"SEARCH_QUERY\":\r\n            return { ...state, ...action.payload }\r\n        // case \"LOGOUT\":\r\n        //     return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport \"antd/dist/antd.css\";\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer, composeWithDevTools())\nReactDOM.render(\n  // <React.StrictMode>\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n\n\n  // </React.StrictMode>\n  ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}