{"version":3,"sources":["functions/category.js","components/nav/AdminNav.js","functions/product.js","components/forms/FileUpload.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js"],"names":["getCategories","a","axios","get","process","getCategory","slug","removeCategory","authtoken","delete","headers","updateCategory","category","put","createCategory","post","getCategorySubs","_id","AdminNav","className","to","createProduct","product","getProductsByCount","count","removeProduct","getProduct","updateProduct","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","getSearchProducts","arg","FileUpload","values","setValues","setLoading","user","useSelector","state","images","map","image","onClick","public_id","token","then","res","filteredImages","filter","item","catch","err","console","log","style","cursor","src","url","size","shape","type","multiple","hidden","accept","onChange","e","files","target","allUploadedFiles","i","length","Resizer","imageFileResizer","uri","push","data","Option","Select","ProductUpdateForm","handleSubmit","handleChange","handleCategoryChange","categories","subOptions","arrayOfSubs","setArrayOfSubs","selectedCategory","title","description","price","shipping","quantity","colors","brands","color","brand","onSubmit","name","value","c","b","mode","width","placeholder","s","initialState","subs","ProductUpdate","match","history","useState","setCategories","setSubOptions","setSelectedCategory","loading","params","useEffect","loadProduct","loadCategories","p","arr","prev","LoadingOutlined","preventDefault","toast","success","error","response"],"mappings":"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","file":"static/js/33.a58ac89c.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n    await axios.get(\r\n        `${process.env.REACT_APP_API}/categories`);\r\n\r\n\r\nexport const getCategory = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\n\r\nexport const removeCategory = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n    await axios.put(\r\n        `${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/category/`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\n    export const getCategorySubs = async (_id) => await axios.get(\r\n        `${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n    ","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n                    Dashboard\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/product\" className=\"nav-link\">\r\n                    Product\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/products\" className=\"nav-link\">\r\n                    Products\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/category\" className=\"nav-link\">\r\n                    Category\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/sub\" className=\"nav-link\">\r\n                    Sub Category\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n                    Coupon\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    password\r\n                </Link>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/product/`, product, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProduct = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\n\r\nexport const updateProduct = async (slug, product, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProducts = async (sort, order, page) => await axios.post(\r\n    `${process.env.REACT_APP_API}/products`, {\r\n    sort, order, page\r\n});\r\n\r\nexport const getProductsCount = async (sort, order, page) => await axios.get(\r\n    `${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`, {\r\n    star\r\n}, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getRelated = async (productId) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\n\r\nexport const getSearchProducts = async (arg) => await axios.post(\r\n    `${process.env.REACT_APP_API}/search/filters`, arg\r\n);","import React from \"react\";\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Avatar, Badge } from \"antd\";\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // console.log(e.target.files);\r\n    // resize\r\n    let files = e.target.files; // 3\r\n    let allUploadedFiles = values.images;\r\n\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i = 0; i < files.length; i++) {\r\n        Resizer.imageFileResizer(\r\n          files[i],\r\n          720,\r\n          720,\r\n          \"JPEG\",\r\n          100,\r\n          0,\r\n          (uri) => {\r\n            // console.log(uri);\r\n            axios\r\n              .post(\r\n                `${process.env.REACT_APP_API}/uploadimages`,\r\n                { image: uri },\r\n                {\r\n                  headers: {\r\n                    authtoken: user ? user.token : \"\",\r\n                  },\r\n                }\r\n              )\r\n              .then((res) => {\r\n                console.log(\"IMAGE UPLOAD RES DATA\", res);\r\n                setLoading(false);\r\n                allUploadedFiles.push(res.data);\r\n\r\n                setValues({ ...values, images: allUploadedFiles });\r\n              })\r\n              .catch((err) => {\r\n                setLoading(false);\r\n                console.log(\"CLOUDINARY UPLOAD ERR\", err);\r\n              });\r\n          },\r\n          \"base64\"\r\n        );\r\n      }\r\n    }\r\n    // send back to server to upload to cloudinary\r\n    // set url to images[] in the parent component state - ProductCreate\r\n  };\r\n\r\n  const handleImageRemove = (public_id) => {\r\n    setLoading(true);\r\n    // console.log(\"remove image\", public_id);\r\n    axios\r\n      .post(\r\n        `${process.env.REACT_APP_API}/removeimage`,\r\n        { public_id },\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : \"\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setLoading(false);\r\n        const { images } = values;\r\n        let filteredImages = images.filter((item) => {\r\n          return item.public_id !== public_id;\r\n        });\r\n        setValues({ ...values, images: filteredImages });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        {values.images &&\r\n          values.images.map((image) => (\r\n            <Badge\r\n              count=\"X\"\r\n              key={image.public_id}\r\n              onClick={() => handleImageRemove(image.public_id)}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              <Avatar\r\n                src={image.url}\r\n                size={100}\r\n                shape=\"square\"\r\n                className=\"ml-3\"\r\n              />\r\n            </Badge>\r\n          ))}\r\n      </div>\r\n      <div className=\"row\">\r\n        <label className=\"btn btn-primary btn-raised mt-3\">\r\n          Choose File\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            hidden\r\n            accept=\"images/*\"\r\n            onChange={fileUploadAndResize}\r\n          />\r\n        </label>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst ProductUpdateForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    setValues,\r\n    values,\r\n    handleCategoryChange,\r\n    categories,\r\n    subOptions,\r\n    arrayOfSubs,\r\n    setArrayOfSubs,\r\n    selectedCategory,\r\n}) => {\r\n    // destructure\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        category,\r\n\r\n        shipping,\r\n        quantity,\r\n\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand,\r\n    } = values;\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    className=\"form-control\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    className=\"form-control\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    value={shipping === \"Yes\" ? \"Yes\" : \"No\"}\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    className=\"form-control\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    value={color}\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    {colors.map((c, i) => (\r\n                        <option key={i} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Brand</label>\r\n                <select\r\n                    value={brand}\r\n                    name=\"brand\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    {brands.map((b, i) => (\r\n                        <option key={i} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Category</label>\r\n                <select\r\n                    name=\"category\"\r\n                    className=\"form-control\"\r\n                    onChange={handleCategoryChange}\r\n                    value={selectedCategory ? selectedCategory : category._id}\r\n                >\r\n                    {categories.length > 0 &&\r\n                        categories.map((c) => (\r\n                            <option key={c._id} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <label>Sub Categories</label>\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    style={{ width: \"100%\" }}\r\n                    placeholder=\"Please select\"\r\n                    value={arrayOfSubs}\r\n                    onChange={(value) => setArrayOfSubs(value)}\r\n                >\r\n                    {subOptions.length &&\r\n                        subOptions.map((s) => (\r\n                            <Option key={s._id} value={s._id}>\r\n                                {s.name}\r\n                            </Option>\r\n                        ))}\r\n                </Select>\r\n            </div>\r\n\r\n            <br />\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default ProductUpdateForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getProduct, updateProduct } from '../../../functions/product'\r\nimport { getCategorySubs, getCategories } from '../../../functions/category'\r\nimport { LoadingOutlined } from '@ant-design/icons'\r\nimport ProductUpdateForm from \"../../../components/forms/ProductUpdateForm\";\r\nimport FileUpload from \"../../../components/forms/FileUpload\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nconst initialState = {\r\n  title: \"\",\r\n  description: \"\",\r\n  price: \"\",\r\n  category: \"\",\r\n  subs: [],\r\n  shipping: \"\",\r\n  quantity: \"\",\r\n  images: [],\r\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n  color: \"\",\r\n  brand: \"\",\r\n};\r\n\r\nconst ProductUpdate = ({ match, history }) => {\r\n  // state\r\n  const [values, setValues] = useState(initialState);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subOptions, setSubOptions] = useState([]);\r\n  const [arrayOfSubs, setArrayOfSubs] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  // router\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    loadProduct();\r\n    loadCategories();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadProduct = () => {\r\n    getProduct(slug).then((p) => {\r\n      // console.log(\"single product\", p);\r\n      // 1 load single proudct\r\n      setValues({ ...values, ...p.data });\r\n      // 2 load single product category subs\r\n      getCategorySubs(p.data.category._id).then((res) => {\r\n        setSubOptions(res.data); // on first load, show default subs\r\n      });\r\n      // 3 prepare array of sub ids to show as default sub values in antd Select\r\n      let arr = [];\r\n      // eslint-disable-next-line array-callback-return\r\n      p.data.subs.map((s) => {\r\n        arr.push(s._id);\r\n      });\r\n      console.log(\"ARR\", arr);\r\n      setArrayOfSubs((prev) => arr); // required for ant design select to work\r\n    });\r\n  };\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => {\r\n      console.log(\"GET CATEGORIES IN UPDATE PRODUCT\", c.data);\r\n      setCategories(c.data);\r\n    });\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    values.subs = arrayOfSubs;\r\n    values.category = selectedCategory ? selectedCategory : values.category;\r\n\r\n    updateProduct(slug, values, user.token)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        toast.success(`\"${res.data.title}\" is updated`);\r\n        history.push(\"/admin/products\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n        toast.error(err.response.data.err);\r\n      });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n    // console.log(e.target.name, \" ----- \", e.target.value);\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"CLICKED CATEGORY\", e.target.value);\r\n    setValues({ ...values, subs: [] });\r\n\r\n    setSelectedCategory(e.target.value);\r\n\r\n    getCategorySubs(e.target.value).then((res) => {\r\n      console.log(\"SUB OPTIONS ON CATEGORY CLICK\", res);\r\n      setSubOptions(res.data);\r\n    });\r\n\r\n    console.log(\"EXISTING CATEGORY values.category\", values.category);\r\n\r\n    // if user clicks back to the original category\r\n    // show its sub categories in default\r\n    if (values.category._id === e.target.value) {\r\n      loadProduct();\r\n    }\r\n    // clear old sub category ids\r\n    setArrayOfSubs([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n\r\n        <div className=\"col-md-10\">\r\n          {loading ? (\r\n            <LoadingOutlined className=\"text-danger h1\" />\r\n          ) : (\r\n            <h4>Product update</h4>\r\n          )}\r\n\r\n          {/* {JSON.stringify(values)} */}\r\n\r\n          <div className=\"p-3\">\r\n            <FileUpload\r\n              values={values}\r\n              setValues={setValues}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n\r\n          <ProductUpdateForm\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n            setValues={setValues}\r\n            values={values}\r\n            handleCategoryChange={handleCategoryChange}\r\n            categories={categories}\r\n            subOptions={subOptions}\r\n            arrayOfSubs={arrayOfSubs}\r\n            setArrayOfSubs={setArrayOfSubs}\r\n            selectedCategory={selectedCategory}\r\n          />\r\n          <hr />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductUpdate;\r\n"],"sourceRoot":""}