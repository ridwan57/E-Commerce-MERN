(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(36),r=n.n(c),s=(n(130),n(10)),o=n.n(s),i=n(19),l=n(33),u=n(12),j=(n(99),n(13)),d=n(11),b=n(87);n(131);b.a.initializeApp({apiKey:"AIzaSyBS7Gi4aU2rXZ2Tjy9XUYSaLgaW8HlqgnA",authDomain:"e-commerce-mern-dbf46.firebaseapp.com",projectId:"e-commerce-mern-dbf46",storageBucket:"e-commerce-mern-dbf46.appspot.com",messagingSenderId:"129077110402",appId:"1:129077110402:web:3ba530ea06be501fccf69b",measurementId:"G-R7KHNYMLJ4"});var h=b.a.auth(),m=new b.a.auth.GoogleAuthProvider,p=n(162),O=n(164),f=n(165),x=n(20),g=n(21),v=n(32),N=n.n(v),w=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/create-or-update-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/current-user"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/current-admin"),{},{headers:{authtoken:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(3),C=function(e){var t=e.history,n=Object(a.useState)("ridwananik57@gmail.com"),c=Object(d.a)(n,2),r=c[0],s=c[1],l=Object(a.useState)("1234567"),b=Object(d.a)(l,2),v=b[0],N=b[1],y=Object(a.useState)(!1),k=Object(d.a)(y,2),C=k[0],E=k[1],R=Object(x.c)((function(e){return Object(j.a)({},e)})).user;Object(a.useEffect)((function(){R&&R.token&&t.push("/")}),[R,t]);var _=Object(x.b)(),P=function(e){"admin"===e.data.role?t.push("/admin/dashboard"):t.push("/user/history")},I=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(!0),e.prev=2,e.next=5,h.signInWithEmailAndPassword(r,v);case 5:return n=e.sent,a=n.user,e.next=9,a.getIdTokenResult();case 9:c=e.sent,w(c.token).then((function(e){_({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:c.token,role:e.data.role,_id:e.data._id}}),P(e)})).catch((function(e){return console.log(e)})),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),u.b.error(e.t0.message),E(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.signInWithPopup(m).then(function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,e.next=3,n.getIdTokenResult();case 3:a=e.sent,w(a.token).then((function(e){_({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:a.token,role:e.data.role,_id:e.data._id}}),P(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),u.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"container p-5",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 offset-md-3",children:[C?Object(S.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(S.jsx)("h4",{children:"Login"}),Object(S.jsxs)("form",{onSubmit:I,children:[Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0})}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("input",{type:"password",className:"form-control",value:v,onChange:function(e){return N(e.target.value)},placeholder:"Your password"})}),Object(S.jsx)("br",{}),Object(S.jsx)(p.a,{onClick:I,type:"primary",className:"mb-3",block:!0,shape:"round",icon:Object(S.jsx)(O.a,{}),size:"large",disabled:!r||v.length<6,children:"Login with Email/Password"})]}),Object(S.jsx)(p.a,{onClick:D,type:"danger",className:"mb-3",block:!0,shape:"round",icon:Object(S.jsx)(f.a,{}),size:"large",children:"Login with Google"}),Object(S.jsx)(g.b,{to:"/forgot/password",className:"float-right text-danger",children:"Forgot Password"})]})})})},E=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(d.a)(n,2),r=c[0],s=c[1],l=Object(x.c)((function(e){return Object(j.a)({},e)})).user;Object(a.useEffect)((function(){l&&l.token&&t.push("/")}),[l,t]);var b=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={url:"http://localhost:3000/register/complete",handleCodeInApp:!0},e.next=4,h.sendSignInLinkToEmail(r,n);case 4:u.b.success("Email is sent to ".concat(r,". Click the link to complete your registration.")),window.localStorage.setItem("emailForRegistration",r),s("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"container p-5",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(S.jsx)("h4",{children:"Register"}),Object(S.jsxs)("form",{onSubmit:b,children:[Object(S.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Your email",autoFocus:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Register"})]})]})})})},R=function(){return Object(S.jsx)("div",{children:Object(S.jsx)("p",{children:"Home"})})},_=n(160),P=n(166),I=n(167),D=n(168),L=n(169),A=n(170),T=n(122),F=_.a.SubMenu,G=_.a.Item,U=function(){var e=Object(a.useState)("home"),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(x.b)(),s=Object(x.c)((function(e){return Object(j.a)({},e)})).user,o=Object(l.f)();return Object(S.jsxs)(_.a,{onClick:function(e){c(e.key)},selectedKeys:[n],mode:"horizontal",children:[Object(S.jsx)(G,{icon:Object(S.jsx)(P.a,{}),children:Object(S.jsx)(g.b,{to:"/",children:"Home"})},"home"),!s&&Object(S.jsx)(G,{icon:Object(S.jsx)(I.a,{}),className:"float-right",children:Object(S.jsx)(g.b,{to:"/register",children:"Register"})},"register"),!s&&Object(S.jsx)(G,{icon:Object(S.jsx)(D.a,{}),className:"float-right",children:Object(S.jsx)(g.b,{to:"/login",children:"Login"})},"login"),s&&Object(S.jsxs)(F,{icon:Object(S.jsx)(L.a,{}),title:s.email&&s.email.split("@")[0],className:"float-right",children:[s&&"subscriber"===s.role&&Object(S.jsx)(G,{children:Object(S.jsx)(g.b,{to:"/user/history",children:" DashBoard"})}),s&&"admin"===s.role&&Object(S.jsx)(G,{children:Object(S.jsx)(g.b,{to:"/admin/dashboard",children:" DashBoard"})}),Object(S.jsx)(G,{icon:Object(S.jsx)(A.a,{}),onClick:function(){T.a.auth().signOut(),r({type:"LOGOUT",payload:null}),o.push("/login")},children:"Logout"})]})]})},B=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(d.a)(n,2),r=c[0],s=c[1],l=Object(a.useState)(""),j=Object(d.a)(l,2),b=j[0],m=j[1],p=Object(x.b)();Object(a.useEffect)((function(){s(window.localStorage.getItem("emailForRegistration"))}),[]);var O=function(){var e=Object(i.a)(o.a.mark((function e(n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r&&b){e.next=4;break}return u.b.error("Email and password is required"),e.abrupt("return");case 4:if(!(b.length<6)){e.next=7;break}return u.b.error("Password must be at least 6 characters long"),e.abrupt("return");case 7:return e.prev=7,e.next=10,h.signInWithEmailLink(r,window.location.href);case 10:if(!e.sent.user.emailVerified){e.next=22;break}return window.localStorage.removeItem("emailForRegistration"),a=h.currentUser,e.next=16,a.updatePassword(b);case 16:return e.next=18,a.getIdTokenResult();case 18:c=e.sent,console.log("user",a,"idTokenResult",c),w(c.token).then((function(e){p({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:c.token,role:e.data.role,_id:e.data._id}})})).catch((function(e){return console.log(e)})),t.push("/");case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),u.b.error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"container p-5",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(S.jsx)("h4",{children:"Register Complete"}),Object(S.jsxs)("form",{onSubmit:O,children:[Object(S.jsx)("input",{type:"email",className:"form-control",value:r,disabled:!0}),Object(S.jsx)("input",{type:"password",className:"form-control",value:b,onChange:function(e){return m(e.target.value)},placeholder:"Password",autoFocus:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",className:"btn btn-raised",children:"Complete Registration"})]})]})})})},W=function(e){var t=e.history,n=Object(a.useState)("ridwananik57@gmail.com"),c=Object(d.a)(n,2),r=c[0],s=c[1],l=Object(x.c)((function(e){return Object(j.a)({},e)})).user;Object(a.useEffect)((function(){l&&l.token&&t.push("/")}),[l]);var b=Object(a.useState)(!1),m=Object(d.a)(b,2),p=m[0],O=m[1],f=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),t.preventDefault(),n={url:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API:"http://localhost:8000/api",REACT_APP_FORGOT_PASSWORD_REDIRECT:"http://localhost:3000/login",REACT_APP_REGISTER_REDIRECT_URL:"http://localhost:3000/register/complete"}).REACT_APP_FORGOT_PASSWORD_REDIRECT_URL,handleCodeInApp:!0},e.next=5,h.sendPasswordResetEmail(r,n).then((function(){O(!1),s(""),u.b.success("Email Sent")})).catch((function(e){O(!1),console.log("error:",e),u.b.error(e.message)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"container p-5",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"col-md-6 offset-md-3",children:[p?Object(S.jsx)("h4",{className:"text-danger",children:"Loading... "}):Object(S.jsx)("h4",{children:"Forgot Password"}),Object(S.jsxs)("form",{onSubmit:f,children:[Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("input",{type:"email",className:"form-control",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Enter your email",autoFocus:!0})}),Object(S.jsx)("button",{disabled:!r||p,type:"submit",className:"btn btn-raised",children:"Confirm Email"})]})]})})})},K=function(){return Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{className:"nav flex-column",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/user/history",className:"nav-link",children:"History"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/user/password",className:"nav-link",children:"Password"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/user/wishlist",className:"nav-link",children:"Wishlist"})})]})})},M=function(){return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(K,{})}),Object(S.jsx)("div",{className:"col",children:"user history page"})]})})},Y=n(85),H=function(){var e=Object(a.useState)(5),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(l.f)();return Object(a.useEffect)((function(){var e=setInterval((function(){c((function(e){return--e}))}),1e3);return 0===n&&r.push("/"),function(){return clearInterval(e)}}),[n,r]),Object(S.jsx)("div",{className:"container p-5 text-center",children:Object(S.jsxs)("p",{children:["Redirecting you in ",n," seconds"]})})},q=function(e){e.children;var t=Object(Y.a)(e,["children"]),n=Object(x.c)((function(e){return Object(j.a)({},e)})).user;return n&&n.token?Object(S.jsx)(l.a,Object(j.a)({},t)):Object(S.jsx)(H,{})},z=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(d.a)(r,2),l=s[0],j=s[1],b=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(!0),e.next=4,h.currentUser.updatePassword(n).then((function(){j(!1),c(""),u.b.success("Password updated")})).catch((function(e){j(!1),u.b.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(K,{})}),Object(S.jsxs)("div",{className:"col",children:[l?Object(S.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(S.jsx)("h4",{children:"Password Update"}),Object(S.jsx)("form",{onSubmit:b,children:Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Your Password"}),Object(S.jsx)("input",{type:"password",onChange:function(e){return c(e.target.value)},className:"form-control",placeholder:"Enter new password",disabled:l,value:n}),Object(S.jsx)("button",{className:"btn btn-primary",disabled:!n||n.length<6||l,children:"Submit"})]})})]})]})})},V=function(){return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(K,{})}),Object(S.jsx)("div",{className:"col",children:"user wishlist page"})]})})},J=function(e){e.children;var t=Object(Y.a)(e,["children"]),n=Object(x.c)((function(e){return Object(j.a)({},e)})).user,c=Object(a.useState)(!1),r=Object(d.a)(c,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){n&&n.token&&k(n.token).then((function(e){o(!0),console.log("CURRENT ADMIN RES",e)})).catch((function(e){o(!1),console.log("CURRENT ADMIN ERR",e)}))}),[n]),s?Object(S.jsx)(l.a,Object(j.a)({},t)):Object(S.jsx)(H,{})},X=function(){return Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{className:"nav flex-column",children:[Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/dashboard",className:"nav-link",children:"Dashboard"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/product",className:"nav-link",children:"Product"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/products",className:"nav-link",children:"Products"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/category",className:"nav-link",children:"Category"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/sub",className:"nav-link",children:"Sub Category"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/admin/coupon",className:"nav-link",children:"Coupon"})}),Object(S.jsx)("li",{className:"nav-item",children:Object(S.jsx)(g.b,{to:"/user/password",className:"nav-link",children:"password"})})]})})},Z=function(){return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsx)("div",{className:"col",children:"admin dashboard"})]})})},Q=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat("http://localhost:8000/api","/categories"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat("http://localhost:8000/api","/category/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat("http://localhost:8000/api","/category/").concat(t),{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(i.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat("http://localhost:8000/api","/category/").concat(t),n,{headers:{authtoken:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/category/"),t,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat("http://localhost:8000/api","/category/subs/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=n(171),re=n(172),se=function(e){var t=e.handleSubmit,n=e.setName,a=e.name;return Object(S.jsx)("form",{onSubmit:t,children:Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Name"}),Object(S.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return n(e.target.value)},value:a,autoFocus:!0,required:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{className:"btn btn-outline-primary",children:"Save"})]})})},oe=function(e){var t=e.setKeyword,n=e.keyword;return Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("input",{type:"search",placeholder:"Filter",value:n,onChange:function(e){e.preventDefault(),t(e.target.value)},className:"form-control mb-4"})})},ie=function(){var e=Object(x.c)((function(e){return Object(j.a)({},e)})).user,t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],b=Object(a.useState)(!1),h=Object(d.a)(b,2),m=h[0],p=h[1],O=Object(a.useState)([]),f=Object(d.a)(O,2),v=f[0],N=f[1];Object(a.useEffect)((function(){y()}),[]);var w,y=function(){return Q().then((function(e){return N(e.data)}))};return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsxs)("div",{className:"col",children:[m?Object(S.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(S.jsx)("h4",{children:"Create category"}),Object(S.jsx)(se,{handleSubmit:function(t){t.preventDefault(),p(!0),ne({name:c},e.token).then((function(e){p(!1),r(""),u.b.success('"'.concat(e.data.name,'" is created')),y()})).catch((function(e){console.log(e),p(!1),e.response.status,u.b.error(e.response.data)}))},name:c,setName:r}),Object(S.jsx)(oe,{keyword:i,setKeyword:l}),v.filter((w=i,function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(t,n){return Object(S.jsxs)("div",{className:"alert alert-secondary",children:[t.name," ",Object(S.jsx)("span",{className:"btn btn-sm float-right",children:Object(S.jsx)(ce.a,{disabled:m,onClick:function(){return function(t){var n=window.confirm("Are you sure you want to delete ".concat(t," ?"));console.log(n),n&&(p(!0),ee(t,e.token).then((function(e){console.log("res:",e),p(!1),u.b.success("".concat(e.data.name," Deleted")),y()})).catch((function(e){console.log("err:",e),p(!1),e.response.status,u.b.error(e.response.data)})))}(t.slug)},className:"text-danger"})})," ",Object(S.jsxs)(g.b,{to:"/admin/category/".concat(t.slug),children:[Object(S.jsxs)("span",{className:"btn btn-sm float-right",children:[" ",Object(S.jsx)(re.a,{className:"text-warning"})]})," "]})]},n)}))]})]})})},le=function(e){var t=e.history,n=e.match.params,c=Object(x.c)((function(e){return Object(j.a)({},e)})).user,r=Object(a.useState)(!1),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(""),b=Object(d.a)(l,2),h=b[0],m=b[1];Object(a.useEffect)((function(){$(n.slug).then((function(e){m(e.data.name),console.log(e)})).catch((function(e){return console.log(e)}))}),[n]);return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsxs)("div",{className:"col",children:[o?Object(S.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(S.jsx)("h4",{children:"Create category"}),Object(S.jsx)(se,{handleSubmit:function(e){e.preventDefault(),i(!0),te(n.slug,{name:h},c.token).then((function(e){i(!1),u.b.success('"'.concat(e.data.name,'" is updated')),m(""),t.push("/admin/category")})).catch((function(e){console.log(e),i(!1),e.response.status,u.b.error(e.response.data)}))},name:h,setName:m}),Object(S.jsx)("hr",{})]})]})})},ue=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat("http://localhost:8000/api","/subs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat("http://localhost:8000/api","/sub/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat("http://localhost:8000/api","/sub/").concat(t),{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(i.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat("http://localhost:8000/api","/sub/").concat(t),n,{headers:{authtoken:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/sub"),t,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(x.c)((function(e){return Object(j.a)({},e)})).user,t=Object(a.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],b=Object(a.useState)(!1),h=Object(d.a)(b,2),m=h[0],p=h[1],O=Object(a.useState)([]),f=Object(d.a)(O,2),v=f[0],N=f[1],w=Object(a.useState)([]),y=Object(d.a)(w,2),k=y[0],C=y[1],E=Object(a.useState)([]),R=Object(d.a)(E,2),_=R[0],P=R[1];Object(a.useEffect)((function(){D(),L()}),[]);var I,D=function(){return Q().then((function(e){return N(e.data)}))},L=function(){return ue().then((function(e){return C(e.data)}))};return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsxs)("div",{className:"col",children:[m?Object(S.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(S.jsx)("h4",{children:"Create sub category"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Parent Category"}),Object(S.jsxs)("select",{name:"category",className:"form-control",onChange:function(e){return P(e.target.value)},children:[Object(S.jsx)("option",{children:"Please Select"}),v.length>0&&v.map((function(e,t){return Object(S.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(S.jsx)(se,{handleSubmit:function(t){t.preventDefault(),p(!0),he({name:c,parent:_},e.token).then((function(e){p(!1),r(""),u.b.success('"'.concat(e.data.name,'" is created')),L()})).catch((function(e){console.log(e),p(!1),e.response.status,u.b.error(e.response.data)}))},name:c,setName:r}),Object(S.jsx)(oe,{keyword:i,setKeyword:l}),k.filter((I=i,function(e){return e.name.toLowerCase().includes(I.toLowerCase())})).map((function(t,n){return Object(S.jsxs)("div",{className:"alert alert-secondary",children:[t.name," ",Object(S.jsx)("span",{className:"btn btn-sm float-right",children:Object(S.jsx)(ce.a,{disabled:m,onClick:function(){return function(t){var n=window.confirm("Are you sure you want to delete ".concat(t," ?"));console.log(n),n&&(p(!0),de(t,e.token).then((function(e){console.log("res:",e),p(!1),u.b.error("".concat(e.data.name," Deleted")),L()})).catch((function(e){console.log("err:",e),p(!1),e.response.status,u.b.error(e.response.data)})))}(t.slug)},className:"text-danger"})})," ",Object(S.jsxs)(g.b,{to:"/admin/sub/".concat(t.slug),children:[Object(S.jsxs)("span",{className:"btn btn-sm float-right",children:[" ",Object(S.jsx)(re.a,{className:"text-warning"})]})," "]})]},n)}))]})]})})},pe=function(e){var t=e.match,n=e.history,c=Object(x.c)((function(e){return Object(j.a)({},e)})).user,r=Object(a.useState)(""),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(!1),b=Object(d.a)(l,2),h=b[0],m=b[1],p=Object(a.useState)([]),O=Object(d.a)(p,2),f=O[0],g=O[1],v=Object(a.useState)(""),N=Object(d.a)(v,2),w=N[0],y=N[1];Object(a.useEffect)((function(){k(),C()}),[]);var k=function(){return Q().then((function(e){console.log(e.data),g(e.data)}))},C=function(){return je(t.params.slug).then((function(e){i(e.data.name),console.log("s.data.name:",e.data.name),y(e.data.parent)})).catch((function(e){return console.log("load subs",e)}))};return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsxs)("div",{className:"col",children:[h?Object(S.jsx)("h4",{className:"text-danger",children:"Loading.."}):Object(S.jsx)("h4",{children:"Update sub category"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Parent category"}),Object(S.jsxs)("select",{name:"category",className:"form-control",onChange:function(e){return y(e.target.value)},children:[Object(S.jsx)("option",{children:"Please select"}),f.length>0&&f.map((function(e){return Object(S.jsx)("option",{value:e._id,selected:e._id===w,children:e.name},e._id)}))]})]}),Object(S.jsx)(se,{handleSubmit:function(e){e.preventDefault(),m(!0),be(t.params.slug,{name:o,parent:w},c.token).then((function(e){m(!1),i(""),u.b.success('"'.concat(e.data.name,'" is updated')),n.push("/admin/sub")})).catch((function(e){console.log(e),m(!1),400===e.response.status&&u.b.error(e.response.data)}))},name:o,setName:i})]})]})})},Oe=n(68),fe=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat("http://localhost:8000/api","/product/"),t,{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=n(158),ge=xe.a.Option,ve=function(e){var t=e.setValues,n=e.handleSubmit,a=e.handleChange,c=e.values,r=e.handleCategoryChange,s=e.subOptions,o=c.title,i=c.description,l=c.price,u=c.categories,d=(c.category,c.subs),b=(c.shipping,c.quantity),h=(c.images,c.colors),m=c.brands;c.color,c.brand;return Object(S.jsxs)("form",{onSubmit:n,children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Title"}),Object(S.jsx)("input",{type:"text",name:"title",className:"form-control",value:o,onChange:a})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("input",{type:"text",name:"description",className:"form-control",value:i,onChange:a})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Price"}),Object(S.jsx)("input",{type:"number",name:"price",className:"form-control",value:l,onChange:a})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Shipping"}),Object(S.jsxs)("select",{name:"shipping",className:"form-control",onChange:a,children:[Object(S.jsx)("option",{children:"Please select"}),Object(S.jsx)("option",{value:"No",children:"No"}),Object(S.jsx)("option",{value:"Yes",children:"Yes"})]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Quantity"}),Object(S.jsx)("input",{type:"number",name:"quantity",className:"form-control",value:b,onChange:a})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Color"}),Object(S.jsxs)("select",{name:"color",className:"form-control",onChange:a,children:[Object(S.jsx)("option",{children:"Please select"}),h.map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Brand"}),Object(S.jsxs)("select",{name:"brand",className:"form-control",onChange:a,children:[Object(S.jsx)("option",{children:"Please select"}),m.map((function(e){return Object(S.jsx)("option",{value:e,children:e},e)}))]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Category"}),Object(S.jsxs)("select",{name:"category",className:"form-control",onChange:r,children:[Object(S.jsx)("option",{children:"Please Select"}),u.length>0&&u.map((function(e,t){return Object(S.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),s.length>0&&Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{children:"Sub Category"}),Object(S.jsx)(xe.a,{mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:["a10","c12"],onChange:function(e){return t(Object(j.a)(Object(j.a)({},c),{},{subs:e}))},name:"subs",value:d,children:s.map((function(e,t){return Object(S.jsx)(ge,{value:e._id,children:e.name},e._id)}))})]}),Object(S.jsx)("button",{className:"btn btn-outline-info",children:"Save"})]})},Ne=n(118),we=n.n(Ne),ye=n(163),ke=n(161),Se=function(e){return new Promise((function(t){we.a.imageFileResizer(e,360,360,"JPEG",100,0,(function(e){t(e)}),"base64")}))},Ce=function(e){var t=e.values,n=e.setValues,a=e.setLoading,c=e.setKey,r=Object(x.c)((function(e){return Object(j.a)({},e)})).user;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"row",children:t.images&&t.images.map((function(e,s){return Object(S.jsx)(ye.a,{count:"X",style:{cursor:"pointer"},onClick:function(){return s=e.public_id,console.log("id:",s),a(!0),void N.a.post("".concat("http://localhost:8000/api","/removeimage"),{public_id:s},{headers:{authtoken:r.token}}).then((function(e){console.log("IMAGE UPLOAD RES DATA",e),c(Math.random());var r=t.images.filter((function(e){return e.public_id!==s}));n(Object(j.a)(Object(j.a)({},t),{},{images:r})),a(!1)})).catch((function(e){a(!1),console.log(e)}));var s},children:Object(S.jsx)(ke.a,{src:e.url,size:100,shape:"square",className:"m-3",children:"Product Image"})},e.public_id)}))}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("label",{className:"btn btn-primary",children:["Choose File",Object(S.jsx)("input",{type:"file",hidden:!0,multiple:!0,accept:"images/*",onChange:function(e){var s=e.target.files;console.log("e.target.files:",e.target.files);var o=t?t.images:[];if(s.length>0){a(!0);for(var i=0;i<s.length;i++)Se(s[i]).then((function(e){console.log(e),N.a.post("".concat("http://localhost:8000/api","/uploadimages"),{image:e},{headers:{authtoken:r?r.token:""}}).then((function(e){console.log("IMAGE UPLOAD RES DATA",e),c(Math.random()),u.b.success("Uploaded"),a(!1),o.push(e.data)})).catch((function(e){console.log("IMAGE POST FAILED",e)}))})).catch((function(e){console.log("IMAGE RESIZE FAILED",e)}));n(Object(j.a)(Object(j.a)({},t),{},{images:o}))}}})]})})]})},Ee=n(73),Re={title:"Nokia x7",description:"Best Phone",price:"25500",categories:[],category:"",subs:[],shipping:"Yes",quantity:"50",images:[],colors:["Black","Brown","Silver","White","Blue"],brands:["Apple","Samsung","Microsoft","Lenovo","ASUS"],color:"Black",brand:"Nokia"},_e=function(){var e=Object(a.useState)(Re),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(x.c)((function(e){return Object(j.a)({},e)})).user,s=Object(a.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1],b=Object(a.useState)(!1),h=Object(d.a)(b,2),m=h[0],p=h[1],O=Object(a.useState)("1"),f=Object(d.a)(O,2),g=f[0],v=f[1];Object(a.useEffect)((function(){console.log("use effect product create"),N()}),[]);var N=function(){return Q().then((function(e){return c(Object(j.a)(Object(j.a)({},n),{},{categories:e.data}))})).catch((function(e){return console.log(e)}))};return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-2",children:Object(S.jsx)(X,{})}),Object(S.jsxs)("div",{className:"col-md-10",children:[m?Object(S.jsx)(Ee.a,{className:"text-danger h1"}):Object(S.jsx)("h4",{children:"Product create"}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"p-3",children:Object(S.jsx)(Ce,{setKey:v,values:n,setValues:c,setLoading:p},g)}),Object(S.jsx)(ve,{handleSubmit:function(e){e.preventDefault(),fe(n,r.token).then((function(e){window.alert('"'.concat(e.data.title,'" is created')),window.location.reload(),c(Re)})).catch((function(e){console.log(e),u.b.error(e.response.data.err)}))},handleChange:function(e){c((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(Oe.a)({},e.target.name,e.target.value))}))},values:n,handleCategoryChange:function(e){e.preventDefault(),console.log("handleCategoryChange",e.target.value),c((function(t){var n;return Object(j.a)(Object(j.a)({},t),{},(n={},Object(Oe.a)(n,e.target.name,e.target.value),Object(Oe.a)(n,"subs",[]),n))})),ae(e.target.value).then((function(e){console.log(e.data),l(e.data)})).catch((function(e){console.log(e)}))},subOptions:i,setValues:c})]})]})})},Pe=function(){var e=Object(x.b)();return Object(a.useEffect)((function(){var t=h.onAuthStateChanged(function(){var t=Object(i.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,n.getIdTokenResult();case 3:a=t.sent,console.log("user",n),y(a.token).then((function(t){e({type:"LOGGED_IN_USER",payload:{name:t.data.name,email:t.data.email,token:a.token,role:t.data.role,_id:t.data._id}})})).catch((function(e){return console.log(e)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return t()}}),[e]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(U,{}),Object(S.jsx)(u.a,{}),Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/",component:R}),Object(S.jsx)(l.a,{exact:!0,path:"/login",component:C}),Object(S.jsx)(l.a,{exact:!0,path:"/register",component:E}),Object(S.jsx)(l.a,{exact:!0,path:"/register/complete",component:B}),Object(S.jsx)(l.a,{exact:!0,path:"/forgot/password",component:W}),Object(S.jsx)(q,{exact:!0,path:"/user/history",component:M}),Object(S.jsx)(q,{exact:!0,path:"/user/password",component:z}),Object(S.jsx)(q,{exact:!0,path:"/user/wishlist",component:V}),Object(S.jsx)(J,{exact:!0,path:"/admin/dashboard",component:Z}),Object(S.jsx)(J,{exact:!0,path:"/admin/category",component:ie}),Object(S.jsx)(J,{exact:!0,path:"/admin/category/:slug",component:le}),Object(S.jsx)(J,{exact:!0,path:"/admin/sub",component:me}),Object(S.jsx)(J,{exact:!0,path:"/admin/sub/:slug",component:pe}),Object(S.jsx)(J,{exact:!0,path:"/admin/product",component:_e})]})]})},Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},De=(n(155),n(57)),Le=n(119),Ae=Object(De.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":case"LOGOUT":return t.payload;default:return e}}}),Te=Object(De.createStore)(Ae,Object(Le.composeWithDevTools)());r.a.render(Object(S.jsx)(x.a,{store:Te,children:Object(S.jsx)(g.a,{children:Object(S.jsx)(Pe,{})})}),document.getElementById("root")),Ie()}},[[156,1,2]]]);
//# sourceMappingURL=main.75fed9d0.chunk.js.map