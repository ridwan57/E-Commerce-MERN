{"version":3,"sources":["functions/category.js","components/nav/AdminNav.js","functions/product.js","components/forms/FileUpload.js","components/forms/ProductCreateForm.js","pages/admin/product/ProductCreate.js"],"names":["getCategories","a","axios","get","process","getCategory","slug","removeCategory","authtoken","delete","headers","updateCategory","category","put","createCategory","post","getCategorySubs","_id","AdminNav","className","to","createProduct","product","getProductsByCount","count","removeProduct","getProduct","updateProduct","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","getSearchProducts","arg","FileUpload","values","setValues","setLoading","user","useSelector","state","images","map","image","onClick","public_id","token","then","res","filteredImages","filter","item","catch","err","console","log","style","cursor","src","url","size","shape","type","multiple","hidden","accept","onChange","e","files","target","allUploadedFiles","i","length","Resizer","imageFileResizer","uri","push","data","Option","Select","ProductCreateForm","props","handleSubmit","handleChange","handleCategoryChange","subOptions","title","description","price","categories","subs","quantity","colors","brands","onSubmit","name","value","c","b","id","mode","width","placeholder","defaultValue","val","initialState","shipping","color","brand","ProductCreate","useState","setSubOptions","loading","key","setKey","useEffect","loadCategories","LoadingOutlined","preventDefault","window","alert","location","reload","toast","error","response","prev"],"mappings":"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","file":"static/js/32.7ff47343.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n    await axios.get(\r\n        `${process.env.REACT_APP_API}/categories`);\r\n\r\n\r\nexport const getCategory = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\n\r\nexport const removeCategory = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n    await axios.put(\r\n        `${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/category/`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\n    export const getCategorySubs = async (_id) => await axios.get(\r\n        `${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n    ","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n                    Dashboard\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/product\" className=\"nav-link\">\r\n                    Product\r\n        </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/products\" className=\"nav-link\">\r\n                    Products\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/category\" className=\"nav-link\">\r\n                    Category\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/sub\" className=\"nav-link\">\r\n                    Sub Category\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n                    Coupon\r\n                </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    password\r\n                </Link>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n);\r\n\r\nexport default AdminNav;\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n    await axios.post(\r\n        `${process.env.REACT_APP_API}/product/`, product, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) => await axios.delete(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProduct = async (slug) => await axios.get(\r\n    `${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\n\r\nexport const updateProduct = async (slug, product, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getProducts = async (sort, order, page) => await axios.post(\r\n    `${process.env.REACT_APP_API}/products`, {\r\n    sort, order, page\r\n});\r\n\r\nexport const getProductsCount = async (sort, order, page) => await axios.get(\r\n    `${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) => await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`, {\r\n    star\r\n}, {\r\n    headers: {\r\n        authtoken\r\n    }\r\n});\r\n\r\nexport const getRelated = async (productId) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\n\r\nexport const getSearchProducts = async (arg) => await axios.post(\r\n    `${process.env.REACT_APP_API}/search/filters`, arg\r\n);","import React from \"react\";\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Avatar, Badge } from \"antd\";\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // console.log(e.target.files);\r\n    // resize\r\n    let files = e.target.files; // 3\r\n    let allUploadedFiles = values.images;\r\n\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i = 0; i < files.length; i++) {\r\n        Resizer.imageFileResizer(\r\n          files[i],\r\n          720,\r\n          720,\r\n          \"JPEG\",\r\n          100,\r\n          0,\r\n          (uri) => {\r\n            // console.log(uri);\r\n            axios\r\n              .post(\r\n                `${process.env.REACT_APP_API}/uploadimages`,\r\n                { image: uri },\r\n                {\r\n                  headers: {\r\n                    authtoken: user ? user.token : \"\",\r\n                  },\r\n                }\r\n              )\r\n              .then((res) => {\r\n                console.log(\"IMAGE UPLOAD RES DATA\", res);\r\n                setLoading(false);\r\n                allUploadedFiles.push(res.data);\r\n\r\n                setValues({ ...values, images: allUploadedFiles });\r\n              })\r\n              .catch((err) => {\r\n                setLoading(false);\r\n                console.log(\"CLOUDINARY UPLOAD ERR\", err);\r\n              });\r\n          },\r\n          \"base64\"\r\n        );\r\n      }\r\n    }\r\n    // send back to server to upload to cloudinary\r\n    // set url to images[] in the parent component state - ProductCreate\r\n  };\r\n\r\n  const handleImageRemove = (public_id) => {\r\n    setLoading(true);\r\n    // console.log(\"remove image\", public_id);\r\n    axios\r\n      .post(\r\n        `${process.env.REACT_APP_API}/removeimage`,\r\n        { public_id },\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : \"\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setLoading(false);\r\n        const { images } = values;\r\n        let filteredImages = images.filter((item) => {\r\n          return item.public_id !== public_id;\r\n        });\r\n        setValues({ ...values, images: filteredImages });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        {values.images &&\r\n          values.images.map((image) => (\r\n            <Badge\r\n              count=\"X\"\r\n              key={image.public_id}\r\n              onClick={() => handleImageRemove(image.public_id)}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              <Avatar\r\n                src={image.url}\r\n                size={100}\r\n                shape=\"square\"\r\n                className=\"ml-3\"\r\n              />\r\n            </Badge>\r\n          ))}\r\n      </div>\r\n      <div className=\"row\">\r\n        <label className=\"btn btn-primary btn-raised mt-3\">\r\n          Choose File\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            hidden\r\n            accept=\"images/*\"\r\n            onChange={fileUploadAndResize}\r\n          />\r\n        </label>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n","import React from 'react'\r\nimport { Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\nconst ProductCreateForm = (props) => {\r\n\r\n    const { setValues, handleSubmit, handleChange, values, handleCategoryChange, subOptions } = props\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        categories,\r\n\r\n        subs,\r\n\r\n        quantity,\r\n\r\n        colors,\r\n        brands,\r\n\r\n\r\n    } = values;\r\n    return (\r\n\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    className=\"form-control\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    className=\"form-control\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    className=\"form-control\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    className=\"form-control\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    {colors.map((c, i) => (\r\n                        <option key={i} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Brand</label>\r\n                <select\r\n                    name=\"brand\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please select</option>\r\n                    {brands.map((b, i) => (\r\n                        <option key={i} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n            <div className='form-group'>\r\n                <label>Category</label>\r\n                <select name='category' className='form-control'\r\n                    onChange={handleCategoryChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    {categories.length > 0 && categories.map((c, id) => (\r\n                        <option key={c._id} value={c._id}>{c.name}</option>\r\n\r\n                    ))}\r\n\r\n\r\n\r\n                </select>\r\n\r\n            </div>\r\n\r\n            {subOptions.length > 0 &&\r\n                <div>\r\n                    <label>Sub Category</label>\r\n                    <Select\r\n                        mode=\"multiple\"\r\n                        style={{ width: \"100%\" }}\r\n                        placeholder=\"Please select\"\r\n                        defaultValue={[\"a10\", \"c12\"]}\r\n                        onChange={val => setValues({ ...values, subs: val })}\r\n                        name='subs'\r\n                        value={subs}\r\n                    >\r\n                        {subOptions.map((c, id) => (\r\n                            <Option key={c._id} value={c._id}>{c.name}</Option>\r\n\r\n                        ))}\r\n\r\n                    </Select>\r\n                </div>\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductCreateForm\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n    createProduct,\r\n\r\n} from \"../../../functions/product\";\r\n\r\n\r\n\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport ProductCreateForm from \"../../../components/forms/ProductCreateForm\";\r\nimport { getCategories, getCategorySubs } from \"../../../functions/category\";\r\nimport FileUpload from \"../../../components/forms/FileUpload\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nconst initialState = {\r\n    title: \"Nokia x7\",\r\n    description: \"Best Phone\",\r\n    price: \"25500\",\r\n    categories: [],\r\n    category: \"\",\r\n    subs: [],\r\n    shipping: \"Yes\",\r\n    quantity: \"50\",\r\n    images: [\r\n        //     {\r\n        //     \"public_id\": \"x0vydnubetho0d04tkfi\",\r\n        //     \"url\": \"https://res.cloudinary.com/dhhstdwuq/image/upload/v1614983744/x0vydnubetho0d04tkfi.jpg\"\r\n        // },\r\n        // {\r\n        //     \"public_id\": \"owjhdb8gzazgfwnddisf\",\r\n        //     \"url\": \"https://res.cloudinary.com/dhhstdwuq/image/upload/v1614983874/owjhdb8gzazgfwnddisf.jpg\"\r\n        // }\r\n    ],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n    color: \"Black\",\r\n    brand: \"Nokia\",\r\n};\r\n\r\nconst ProductCreate = () => {\r\n    const [values, setValues] = useState(initialState);\r\n    const { user } = useSelector(state => ({ ...state }))\r\n    const [subOptions, setSubOptions] = useState([]);\r\n    const [loading, setLoading] = useState(false)\r\n    const [key, setKey] = useState(\"1\")\r\n\r\n    useEffect(() => {\r\n        console.log('use effect product create')\r\n        loadCategories();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) =>\r\n            setValues({ ...values, categories: c.data })\r\n\r\n\r\n        )\r\n            .catch(err => console.log(err))\r\n\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        createProduct(values, user.token)\r\n            .then(res => {\r\n\r\n                window.alert(`\"${res.data.title}\" is created`);\r\n                window.location.reload()\r\n                setValues(initialState)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n\r\n                // if (err.response.status === 400) toast.error(err.response.message);\r\n                // else\r\n                toast.error(err.response.data.err);\r\n            })\r\n        //\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setValues((prev) => ({\r\n            ...prev,\r\n            [e.target.name]: e.target.value\r\n\r\n        }))\r\n        // console.log(e.target.name, '------------', e.target.value)\r\n        //\r\n    };\r\n\r\n    const handleCategoryChange = (e) => {\r\n        e.preventDefault()\r\n        console.log('handleCategoryChange', e.target.value)\r\n        setValues((prev) => ({\r\n            ...prev,\r\n            [e.target.name]: e.target.value,\r\n            subs: []\r\n        }))\r\n        getCategorySubs(e.target.value).then(res => {\r\n\r\n            console.log(res.data)\r\n            setSubOptions(res.data)\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n        // console.log(e.target.name, '------------', e.target.value)\r\n        //\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col-md-10\">\r\n                    {loading ? <LoadingOutlined className='text-danger h1' /> : <h4>Product create</h4>}\r\n                    <hr />\r\n                    <div className='p-3'>\r\n                        <FileUpload\r\n                            key={key}\r\n                            setKey={setKey}\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                        />\r\n\r\n                    </div>\r\n\r\n\r\n                    <ProductCreateForm\r\n                        handleSubmit={handleSubmit}\r\n                        handleChange={handleChange}\r\n                        values={values}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        subOptions={subOptions}\r\n                        setValues={setValues}\r\n                    />\r\n\r\n\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductCreate;\r\n\r\n"],"sourceRoot":""}